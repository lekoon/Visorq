import{e as b,r as t,j as g}from"./index-DFYgDfrC.js";import{M as $,u as j,P as N,a as S,b as A,L as D}from"./proxy-CWLoALjj.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=b("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);class K extends t.Component{getSnapshotBeforeUpdate(l){const e=this.props.childRef.current;if(e&&l.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=e.offsetHeight||0,n.width=e.offsetWidth||0,n.top=e.offsetTop,n.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function T({children:i,isPresent:l}){const e=t.useId(),n=t.useRef(null),x=t.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=t.useContext($);return t.useInsertionEffect(()=>{const{width:d,height:r,top:h,left:s}=x.current;if(l||!n.current||!d||!r)return;n.current.dataset.motionPopId=e;const c=document.createElement("style");return a&&(c.nonce=a),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${r}px !important;
            top: ${h}px !important;
            left: ${s}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[l]),g.jsx(K,{isPresent:l,childRef:n,sizeRef:x,children:t.cloneElement(i,{ref:n})})}const U=({children:i,initial:l,isPresent:e,onExitComplete:n,custom:x,presenceAffectsLayout:a,mode:d})=>{const r=j(V),h=t.useId(),s=t.useCallback(f=>{r.set(f,!0);for(const C of r.values())if(!C)return;n&&n()},[r,n]),c=t.useMemo(()=>({id:h,initial:l,isPresent:e,custom:x,onExitComplete:s,register:f=>(r.set(f,!1),()=>r.delete(f))}),a?[Math.random(),s]:[e,s]);return t.useMemo(()=>{r.forEach((f,C)=>r.set(C,!1))},[e]),t.useEffect(()=>{!e&&!r.size&&n&&n()},[e]),d==="popLayout"&&(i=g.jsx(T,{isPresent:e,children:i})),g.jsx(N.Provider,{value:c,children:i})};function V(){return new Map}const v=i=>i.key||"";function P(i){const l=[];return t.Children.forEach(i,e=>{t.isValidElement(e)&&l.push(e)}),l}const G=({children:i,custom:l,initial:e=!0,onExitComplete:n,presenceAffectsLayout:x=!0,mode:a="sync",propagate:d=!1})=>{const[r,h]=S(d),s=t.useMemo(()=>P(i),[i]),c=d&&!r?[]:s.map(v),f=t.useRef(!0),C=t.useRef(s),y=j(()=>new Map),[z,I]=t.useState(s),[p,k]=t.useState(s);A(()=>{f.current=!1,C.current=s;for(let u=0;u<p.length;u++){const o=v(p[u]);c.includes(o)?y.delete(o):y.get(o)!==!0&&y.set(o,!1)}},[p,c.length,c.join("-")]);const R=[];if(s!==z){let u=[...s];for(let o=0;o<p.length;o++){const m=p[o],E=v(m);c.includes(E)||(u.splice(o,0,m),R.push(m))}a==="wait"&&R.length&&(u=R),k(P(u)),I(s);return}const{forceRender:w}=t.useContext(D);return g.jsx(g.Fragment,{children:p.map(u=>{const o=v(u),m=d&&!r?!1:s===p||c.includes(o),E=()=>{if(y.has(o))y.set(o,!0);else return;let M=!0;y.forEach(L=>{L||(M=!1)}),M&&(w==null||w(),k(C.current),d&&(h==null||h()),n&&n())};return g.jsx(U,{isPresent:m,initial:!f.current||e?void 0:!1,custom:m?void 0:l,presenceAffectsLayout:x,mode:a,onExitComplete:m?void 0:E,children:u},o)})})};export{G as A,F as N};
