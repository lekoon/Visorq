import{e as w,u as v,a as y,r as k,j as e,b as j,l as M}from"./index-BqZSi2fU.js";import{C as D}from"./clock-Bozt3zJC.js";import{C as u}from"./calendar-B2piyF0m.js";import{D as P}from"./download-BQChd_26.js";import{f as l,s as z}from"./format-CE-Ifukx.js";import{a as p}from"./addWeeks-B6Ku1LRf.js";import{e as S}from"./eachDayOfInterval-D-My5s57.js";import{e as C}from"./endOfWeek-Bbw1JV5G.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=w("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),R=()=>{const{user:d,projects:i}=v(),{t:s}=y(),r=k.useMemo(()=>{var a,n,c,t;return{id:(d==null?void 0:d.id)||"user-1",name:(d==null?void 0:d.name)||"Current User",role:"Senior Developer",availability:40,assignments:[{projectId:((a=i[0])==null?void 0:a.id)||"proj-1",projectName:((n=i[0])==null?void 0:n.name)||"Project Alpha",hours:16,startDate:l(new Date,"yyyy-MM-dd"),endDate:l(p(new Date,2),"yyyy-MM-dd")},{projectId:((c=i[1])==null?void 0:c.id)||"proj-2",projectName:((t=i[1])==null?void 0:t.name)||"Project Beta",hours:20,startDate:l(new Date,"yyyy-MM-dd"),endDate:l(p(new Date,3),"yyyy-MM-dd")}]}},[d,i]),x=z(new Date,{weekStartsOn:1}),b=S({start:x,end:C(x,{weekStartsOn:1})}).slice(0,5),m=r.assignments.reduce((a,n)=>a+n.hours,0),o=m>r.availability,g=()=>{alert(s("workbench.exportingPlan"))},N=()=>{alert(s("workbench.adjustmentRequested"))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl p-8 text-white shadow-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-white/20 backdrop-blur flex-shrink-0 flex items-center justify-center text-3xl font-bold",children:r.name.charAt(0)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-3xl font-bold mb-1 truncate",children:r.name}),e.jsx("p",{className:"text-blue-100 truncate",children:r.role}),e.jsxs("p",{className:"text-sm text-blue-100 mt-2 flex items-center gap-1",children:[e.jsx(D,{size:14}),e.jsxs("span",{className:"whitespace-nowrap",children:[s("workbench.weeklyCapacity"),": ",r.availability,"h"]})]})]})]}),e.jsxs("button",{className:"whitespace-nowrap px-4 py-2 bg-white/20 hover:bg-white/30 backdrop-blur rounded-lg transition-colors flex items-center gap-2 flex-shrink-0",children:[e.jsx(O,{size:18}),s("common.edit")]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(u,{className:"text-blue-600",size:24})}),e.jsxs("div",{className:"min-w-0 mr-2 flex-1",children:[e.jsx("p",{className:"text-sm text-slate-500 truncate",title:s("workbench.thisWeek"),children:s("workbench.thisWeek")}),e.jsxs("h3",{className:"text-2xl font-bold text-slate-900 truncate",children:[m,"h"]})]})]})}),e.jsx("div",{className:`p-6 rounded-xl border shadow-sm ${o?"bg-red-50 border-red-200":"bg-green-50 border-green-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`p-3 rounded-lg ${o?"bg-red-100":"bg-green-100"}`,children:o?e.jsx(j,{className:"text-red-600",size:24}):e.jsx(M,{className:"text-green-600",size:24})}),e.jsxs("div",{className:"min-w-0 mr-2 flex-1",children:[e.jsx("p",{className:"text-sm text-slate-500 truncate",title:s("workbench.utilization"),children:s("workbench.utilization")}),e.jsxs("h3",{className:`text-2xl font-bold truncate ${o?"text-red-600":"text-green-600"}`,children:[(m/r.availability*100).toFixed(0),"%"]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(u,{className:"text-purple-600",size:24})}),e.jsxs("div",{className:"min-w-0 mr-2 flex-1",children:[e.jsx("p",{className:"text-sm text-slate-500 truncate",title:s("workbench.activeProjects"),children:s("workbench.activeProjects")}),e.jsx("h3",{className:"text-2xl font-bold text-slate-900 truncate",children:r.assignments.length})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:s("workbench.assignmentTimeline")}),e.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Week ",l(x,"w, yyyy")," - ",l(x,"MMM d")," to ",l(p(x,1),"MMM d")]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:N,className:"whitespace-nowrap px-4 py-2 bg-orange-100 hover:bg-orange-200 text-orange-700 rounded-lg transition-colors",children:s("workbench.requestAdjustment")}),e.jsxs("button",{onClick:g,className:"whitespace-nowrap flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(P,{size:18}),s("workbench.exportPlan")]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200",children:[e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-slate-600 w-64 whitespace-nowrap",children:s("workbench.project")}),b.map(a=>e.jsxs("th",{className:"p-3 text-center text-xs font-medium text-slate-500 min-w-[80px]",children:[e.jsx("div",{children:l(a,"EEE")}),e.jsx("div",{className:"text-slate-400",children:l(a,"MMM d")})]},a.toISOString())),e.jsx("th",{className:"p-3 text-center text-sm font-semibold text-slate-600",children:s("workbench.total")})]})}),e.jsxs("tbody",{children:[r.assignments.map((a,n)=>{const c=a.hours/5,t=i.find(h=>h.id===a.projectId);return e.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${(t==null?void 0:t.priority)==="P0"?"bg-red-100 text-red-700":(t==null?void 0:t.priority)==="P1"?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:(t==null?void 0:t.priority)||"P2"}),e.jsx("span",{className:"font-medium text-slate-900",children:a.projectName})]})}),b.map(h=>e.jsx("td",{className:"p-2",children:e.jsx("div",{className:"h-8 bg-blue-100 rounded flex items-center justify-center",children:e.jsxs("span",{className:"text-xs font-medium text-blue-700",children:[c.toFixed(1),"h"]})})},h.toISOString())),e.jsx("td",{className:"p-3 text-center",children:e.jsxs("span",{className:"font-bold text-slate-900",children:[a.hours,"h"]})})]},n)}),e.jsxs("tr",{className:"bg-slate-50 font-bold",children:[e.jsx("td",{className:"p-3",children:s("workbench.total")}),b.map((a,n)=>{const c=r.assignments.reduce((h,f)=>h+f.hours/5,0),t=c>8;return e.jsx("td",{className:"p-2",children:e.jsx("div",{className:`h-8 rounded flex items-center justify-center ${t?"bg-red-100":"bg-green-100"}`,children:e.jsxs("span",{className:`text-xs font-bold ${t?"text-red-700":"text-green-700"}`,children:[c.toFixed(1),"h"]})})},n)}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs("span",{className:`font-bold ${o?"text-red-600":"text-green-600"}`,children:[m,"h"]})})]})]})]})}),o&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[e.jsx(j,{className:"text-red-600 flex-shrink-0",size:20}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-red-900 mb-1",children:s("workbench.overloadWarning")}),e.jsx("p",{className:"text-sm text-red-700",children:s("workbench.overloadMessage",{hours:m,capacity:r.availability})})]})]})]})]})};export{R as default};
