import{e as y,r,j as e,a0 as p,Q as R,I as _,b as D}from"./index-DLTjagqU.js";import{B as j,C as n,a as g}from"./Badge-BJpTdfkm.js";import{L as T}from"./list-D-VOgiD7.js";import{C as A}from"./calendar-CL0HZWKx.js";import{C as B}from"./circle-check-DjAyg8Eb.js";import{C as X}from"./clock-rSh1zfGn.js";import{F as Z}from"./filter-CJhon7dT.js";import{A as U}from"./index-CMKpIJ8t.js";import{m as L}from"./proxy-D-plNmX1.js";import{C as V}from"./chevron-right-C5BQvsgd.js";import{f as $}from"./format-uOgKDlBx.js";import{a as P}from"./addDays-D4wmfkaz.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=y("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=y("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=y("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),h=Array.from({length:24}).map((o,a)=>({id:`bay-${a+1}`,name:`Bay ${String(a+1).padStart(2,"0")}`,size:["S","M","L"][a%3],status:["available","occupied","maintenance"][a%8===0?2:a%5===0?0:1],currentProjectId:a%5===0?void 0:`proj-${a%4+1}`,currentProjectName:a%5===0?void 0:a%4===0?"Project Apollo":a%4===1?"Project Zeus":a%4===2?"Mars Rover":"Deep Link",bookings:[]})),N=["RX-2000","RX-2100","TX-500","Alpha-9","Beta-X","Giga-V","Nano-S","Mega-T","Z-Core","Prime-X","Nova-7","Eon-X","Quantum-1","Vector-H","Titan-M","Flux-8","Apex-S","Zenith-P","Orbit-Z","Core-MAX"],v=Array.from({length:60}).map((o,a)=>({id:`mach-${a+1}`,name:`${N[a%20]} #${String(Math.floor(a/20)+1)}`,model:N[a%20],status:["available","occupied","maintenance"][a%12===0?2:a%3===0?0:1],currentProjectId:a%3===0?void 0:`proj-${a%4+1}`,currentProjectName:a%3===0?void 0:a%4===0?"Project Apollo":a%4===1?"Project Zeus":a%4===2?"Mars Rover":"Deep Link",bookings:[]})),le=()=>{const[o,a]=r.useState("visual"),[t,k]=r.useState("bay"),[d,w]=r.useState(""),[b,M]=r.useState("All"),[u,z]=r.useState("All"),C=r.useMemo(()=>h.filter(s=>{var c;const x=s.name.toLowerCase().includes(d.toLowerCase())||(((c=s.currentProjectName)==null?void 0:c.toLowerCase())||"").includes(d.toLowerCase()),m=b==="All"||s.size===b;return x&&m}),[d,b]),S=r.useMemo(()=>v.filter(s=>{var c;const x=s.name.toLowerCase().includes(d.toLowerCase())||(((c=s.currentProjectName)==null?void 0:c.toLowerCase())||"").includes(d.toLowerCase()),m=u==="All"||s.model===u;return x&&m}),[d,u]),i=r.useMemo(()=>{const s=h.length,x=h.filter(l=>l.status==="occupied").length,m=v.length,c=v.filter(l=>l.status==="occupied").length;return{bayUtilization:Math.round(x/s*100),machUtilization:Math.round(c/m*100),availableBays:h.filter(l=>l.status==="available").length,maintenanceBays:h.filter(l=>l.status==="maintenance").length,availableMachines:v.filter(l=>l.status==="available").length}},[]),E=({status:s})=>{switch(s){case"available":return e.jsx(B,{size:16,className:"text-emerald-500"});case"occupied":return e.jsx(D,{size:16,className:"text-blue-500"});case"maintenance":return e.jsx(H,{size:16,className:"text-amber-500"})}},I=({status:s})=>{switch(s){case"available":return e.jsx(g,{variant:"success",children:"可用"});case"occupied":return e.jsx(g,{variant:"primary",children:"占用中"});case"maintenance":return e.jsx(g,{variant:"warning",children:"维护中"})}};return e.jsxs("div",{className:"space-y-6 animate-fadeIn p-1",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 flex items-center gap-3",children:[e.jsx(p,{className:"text-blue-600 dark:text-blue-400",size:32}),"Bay 与机器资源管控"]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"实时监控实验 Bay 和高价值机器的使用状态与预定计划"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-1 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex",children:[e.jsxs("button",{onClick:()=>a("visual"),className:`p-2 rounded-lg transition-all flex items-center gap-2 ${o==="visual"?"bg-blue-600 text-white shadow-md":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[e.jsx(O,{size:18}),"看板视图"]}),e.jsxs("button",{onClick:()=>a("list"),className:`p-2 rounded-lg transition-all flex items-center gap-2 ${o==="list"?"bg-blue-600 text-white shadow-md":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[e.jsx(T,{size:18}),"列表清单"]})]}),e.jsx(j,{variant:"primary",icon:A,children:"发起预定"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(n,{className:"p-4 bg-gradient-to-br from-blue-500 to-blue-700 text-white border-none",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Bay 利用率"}),e.jsx(p,{size:20,className:"text-blue-200"})]}),e.jsxs("h3",{className:"text-3xl font-bold",children:[i.bayUtilization,"%"]}),e.jsx("div",{className:"mt-2 w-full bg-white/20 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"bg-white h-full",style:{width:`${i.bayUtilization}%`}})}),e.jsxs("p",{className:"mt-2 text-xs text-blue-100",children:[i.availableBays," 个可用，",i.maintenanceBays," 个维护中"]})]}),e.jsxs(n,{className:"p-4 bg-gradient-to-br from-purple-500 to-purple-700 text-white border-none",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"机器利用率"}),e.jsx(f,{size:20,className:"text-purple-200"})]}),e.jsxs("h3",{className:"text-3xl font-bold",children:[i.machUtilization,"%"]}),e.jsx("div",{className:"mt-2 w-full bg-white/20 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"bg-white h-full",style:{width:`${i.machUtilization}%`}})}),e.jsxs("p",{className:"mt-2 text-xs text-purple-100",children:[i.availableMachines," 个可用型号闲置"]})]}),e.jsx(n,{className:"p-4 flex flex-col justify-center",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 rounded-xl",children:e.jsx(B,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"当前运作项目"}),e.jsx("h3",{className:"text-xl font-bold",children:"12 个活跃项目"})]})]})}),e.jsx(n,{className:"p-4 flex flex-col justify-center",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900/30 text-amber-600 rounded-xl",children:e.jsx(X,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"未来预定申请"}),e.jsx("h3",{className:"text-xl font-bold",children:"8 项待审批"})]})]})})]}),e.jsxs(n,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6 mb-8",children:[e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1 rounded-xl w-fit",children:[e.jsx("button",{onClick:()=>k("bay"),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${t==="bay"?"bg-white dark:bg-slate-700 shadow-sm text-blue-600":"text-slate-500 hover:text-slate-700"}`,children:"Bay 实验室"}),e.jsx("button",{onClick:()=>k("machine"),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${t==="machine"?"bg-white dark:bg-slate-700 shadow-sm text-blue-600":"text-slate-500 hover:text-slate-700"}`,children:"高价值机器"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:`搜索 ${t==="bay"?"Bay 名称":"机器名称"}或项目...`,className:"pl-10 pr-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-blue-500 outline-none w-64 transition-all",value:d,onChange:s=>w(s.target.value)})]}),t==="bay"?e.jsxs("select",{className:"px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 outline-none focus:ring-2 focus:ring-blue-500",value:b,onChange:s=>M(s.target.value),children:[e.jsx("option",{value:"All",children:"所有尺寸"}),e.jsx("option",{value:"S",children:"小型 (S)"}),e.jsx("option",{value:"M",children:"中型 (M)"}),e.jsx("option",{value:"L",children:"大型 (L)"})]}):e.jsxs("select",{className:"px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 outline-none focus:ring-2 focus:ring-blue-500",value:u,onChange:s=>z(s.target.value),children:[e.jsx("option",{value:"All",children:"所有型号"}),N.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx(j,{variant:"ghost",size:"sm",icon:Z,onClick:()=>{w(""),M("All"),z("All")},children:"清空筛选"})]})]}),e.jsx(U,{mode:"wait",children:o==="visual"?e.jsx(L.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4",children:(t==="bay"?C:S).map(s=>e.jsxs("div",{className:`relative group rounded-2xl border aspect-square p-4 transition-all hover:shadow-xl cursor-default flex flex-col justify-between ${s.status==="available"?"bg-emerald-50/50 dark:bg-emerald-900/10 border-emerald-100 dark:border-emerald-900/50 hover:border-emerald-300":s.status==="occupied"?"bg-blue-50/50 dark:bg-blue-900/10 border-blue-100 dark:border-blue-900/50 hover:border-blue-300 shadow-sm":"bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 opacity-60"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${s.status==="available"?"bg-emerald-100 dark:bg-emerald-900/50 text-emerald-600":s.status==="occupied"?"bg-blue-100 dark:bg-blue-900/50 text-blue-600":"bg-slate-200 dark:bg-slate-700 text-slate-500"}`,children:t==="bay"?e.jsx(p,{size:18}):e.jsx(f,{size:18})}),e.jsx(E,{status:s.status})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-slate-100 truncate",children:s.name}),e.jsx("div",{className:"flex items-center gap-1.5 mt-0.5",children:e.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400",children:t==="bay"?`SIZE: ${s.size}`:`MOD: ${s.model}`})})]}),e.jsx("div",{className:"mt-3",children:s.status==="occupied"?e.jsxs("div",{className:"p-2 bg-white/60 dark:bg-slate-800/60 rounded-xl border border-blue-100/50 dark:border-blue-900/50 group-hover:bg-blue-600 group-hover:border-blue-600 transition-all duration-300",children:[e.jsx("div",{className:"text-[10px] text-blue-400 group-hover:text-blue-100 font-medium truncate",children:"使用中"}),e.jsx("div",{className:"text-[11px] text-slate-700 dark:text-slate-200 group-hover:text-white font-bold truncate",children:s.currentProjectName})]}):s.status==="available"?e.jsx("div",{className:"text-[10px] text-emerald-600 font-bold bg-emerald-100 dark:bg-emerald-900/30 px-2 py-1 rounded-full w-fit",children:"可申请"}):e.jsx("div",{className:"text-[10px] text-amber-600 font-bold bg-amber-100 dark:bg-amber-900/30 px-2 py-1 rounded-full w-fit",children:"检修中"})}),e.jsx("div",{className:"absolute inset-0 bg-slate-900/0 group-hover:bg-slate-900/5 transition-all rounded-2xl pointer-events-none"})]},s.id))},"visual"):e.jsx(L.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},className:"border border-slate-100 dark:border-slate-800 rounded-2xl overflow-hidden",children:e.jsxs("table",{className:"w-full text-left bg-white dark:bg-slate-900",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 text-slate-500 text-sm font-medium border-b border-slate-100 dark:border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"资源名称"}),e.jsx("th",{className:"px-6 py-4",children:t==="bay"?"尺寸规格":"型号"}),e.jsx("th",{className:"px-6 py-4",children:"当前状态"}),e.jsx("th",{className:"px-6 py-4",children:"任务归属"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-800",children:(t==="bay"?C:S).map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-800 rounded-lg group-hover:bg-blue-100 dark:group-hover:bg-blue-900/30 group-hover:text-blue-600 transition-colors",children:t==="bay"?e.jsx(p,{size:18}):e.jsx(f,{size:18})}),e.jsx("span",{className:"font-bold text-slate-900 dark:text-slate-100",children:s.name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm font-mono text-slate-500 dark:text-slate-400",children:t==="bay"?s.size:s.model})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(I,{status:s.status})}),e.jsx("td",{className:"px-6 py-4",children:s.currentProjectName?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]"}),e.jsx("span",{className:"text-sm font-medium",children:s.currentProjectName})]}):e.jsx("span",{className:"text-sm text-slate-400 italic",children:"-- 暂无项目占用 --"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx(j,{variant:"ghost",size:"sm",icon:_,children:"查看预定"})})]},s.id))})]})},"list")}),e.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 dark:border-slate-800 flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-slate-500",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{children:"可用：目前空闲，可发起短期/长期预定"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{children:"占用：项目运行中，点击查看剩余可用时长"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),e.jsx("span",{children:"维护：预防性保养或故障检修，预计恢复日期见详情"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(n,{className:"p-6 col-span-2",children:[e.jsxs("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[e.jsx(A,{size:20,className:"text-blue-600"}),"预定时间轴概览 (未来 7 天)"]}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"w-24 shrink-0 text-right",children:[e.jsx("div",{className:"text-sm font-bold",children:$(P(new Date,s),"MM月dd日")}),e.jsx("div",{className:"text-xs text-slate-400",children:$(P(new Date,s),"EEEE")})]}),e.jsx("div",{className:"relative flex-1 bg-slate-50 dark:bg-slate-800 rounded-xl p-3 border border-slate-100 dark:border-slate-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(g,{variant:"primary",children:["Bay 0",s]}),e.jsx("span",{className:"text-sm font-medium",children:"Project Zeus - 阶段测试"})]}),e.jsx("span",{className:"text-xs text-slate-400",children:"09:00 - 18:00"})]})})]},s))}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(j,{variant:"ghost",size:"sm",children:["查看完整时间表 ",e.jsx(V,{size:16})]})})]}),e.jsxs(n,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"资源申请规则"}),e.jsxs("div",{className:"space-y-4 text-sm text-slate-600 dark:text-slate-400",children:[e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-100 dark:border-blue-900/50",children:[e.jsx("p",{className:"font-bold text-blue-600 dark:text-blue-400 mb-1",children:"提前预定"}),e.jsx("p",{children:"高价值机器需至少提前 2 个工作日预定，Bay 实验室需提前 24 小时预定。"})]}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 px-1",children:[e.jsx("li",{children:"使用完毕后请及时清理 Bay 位并更新状态"}),e.jsx("li",{children:"设备故障请立即标记为“维护中”并通知行政"}),e.jsx("li",{children:"严禁未经系统登记直接挪用他人预定资源"})]})]})]})]})]})};export{le as default};
