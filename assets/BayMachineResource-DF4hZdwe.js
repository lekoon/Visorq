import{e as I,u as Ve,r as n,j as e,c as H,A as ne,L as Ue,w as _e,a2 as w,T as qe,I as ze,X as U}from"./index-DJ7gcr39.js";import{B as i,a as o,C as p}from"./Badge-D2vINjcr.js";import{A as _}from"./index-4sg5bq5x.js";import{m}from"./proxy-CRsk0q8d.js";import{A as Se}from"./activity-DELHMbTo.js";import{C as q}from"./calendar-BPjqwFLz.js";import{Z as K}from"./zap-CRi3v1pK.js";import{C as Ke}from"./circle-check-B8TCJbsI.js";import{L as Ze,H as De}from"./list-C_Xrjwzn.js";import{S as $e}from"./shield-check-CFy8Pp8c.js";import{C as Xe}from"./chevron-left-CaehPRKA.js";import{C as Ye}from"./chevron-right-u7afD1kT.js";import{c as Ge,f as c,s as Je}from"./format-BhZiItnY.js";import{i as Qe,s as es}from"./subMonths-DD30BBZZ.js";import{a as ce,e as ss}from"./eachDayOfInterval-DWcdR5ma.js";import{s as ts,e as as}from"./startOfMonth-DiM1s2AD.js";import{e as ls}from"./endOfWeek-BtuNIl-T.js";import{a as X}from"./addMonths-BTXB9jOG.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=I("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=I("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=I("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=I("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=I("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=I("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=I("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);function cs(x){return Ge(x,Date.now())}function xs(x){return Qe(x,cs(x))}const os=x=>x>80?"text-emerald-500 bg-emerald-500/10":x>50?"text-amber-500 bg-amber-500/10":"text-red-500 bg-red-500/10",ms=x=>{let l=0;x.health<30&&(l+=40),x.status==="maintenance"&&(l+=20),x.conflicts&&x.conflicts.length>0&&(l+=40);const j=new Date(x.nextMaintenance),P=new Date;return Math.ceil((j.getTime()-P.getTime())/(1e3*60*60*24))<7&&(l+=30),Math.min(l,100)},Z=["uCT 760","uCT 510","uCT 860","uMR 770","uMR 580","uX-ray 500"],Ie=Array.from({length:16}).map((x,l)=>({id:`bay-${l+1}`,name:`Bay ${String(l+1).padStart(2,"0")}`,size:["S","M","L"][l%3],status:"available",currentProjectId:void 0,currentProjectName:void 0,health:95+Math.random()*5,lastMaintenance:c(X(new Date,-1),"yyyy-MM-dd"),nextMaintenance:c(ce(new Date,30+l),"yyyy-MM-dd"),bookings:[],conflicts:[],replacementHistory:[],usageHistory:[],version:1})),Pe=Array.from({length:30}).map((x,l)=>({id:`mach-${l+1}`,name:`${Z[l%Z.length]} #${String(l+1).padStart(2,"0")}`,model:Z[l%Z.length],health:98+Math.random()*2,status:"available",currentProjectId:void 0,currentProjectName:void 0,lastMaintenance:c(X(new Date,-1),"yyyy-MM-dd"),nextMaintenance:c(ce(new Date,45+l),"yyyy-MM-dd"),bookings:[],conflicts:[],replacementHistory:[],usageHistory:[],version:1})),Bs=()=>{var Ce;const{projects:x,user:l}=Ve(),[j,P]=n.useState("monitor"),[O,xe]=n.useState("visual"),[C,oe]=n.useState("bay"),[E,Ae]=n.useState(""),[a,z]=n.useState(null),[h,me]=n.useState(Ie),[b,he]=n.useState(Pe),[S,be]=n.useState(new Date),[g,Y]=n.useState(null),[N,pe]=n.useState("bay"),[Te,L]=n.useState(!1),[F,ue]=n.useState(!1),y=(l==null?void 0:l.role)==="admin",G=(l==null?void 0:l.role)==="manager",je=(l==null?void 0:l.role)==="user",f=s=>{if(y)return s.status!=="occupied";if(G||je){const t=s.bookings.find(r=>r.status==="active");return(t==null?void 0:t.reservedBy)===(l==null?void 0:l.id)||(t==null?void 0:t.reservedBy)==="currentUser"}return!1},J=G||je||y,[A,ge]=n.useState(!1),[He,W]=n.useState(!1),[Q,fe]=n.useState(!1),[v,ee]=n.useState({projectId:"",startDate:c(new Date,"yyyy-MM-dd"),endDate:c(ce(new Date,7),"yyyy-MM-dd")}),[u,R]=n.useState({partName:"",reason:"",performedBy:(l==null?void 0:l.name)||""}),[Le,se]=n.useState(!1),[Oe,V]=n.useState(!1),[te,ve]=n.useState(""),[Ne,ye]=n.useState(null),T=(s,t,r)=>{const d=(s.startsWith("bay")?h:b).find(B=>B.id===s);if(r!==void 0&&d&&d.version!==r)return ye(`检测到并发修改冲突：该资源 (ID: ${s}) 的状态刚刚已被其他调度员更新。请刷新页面获取最新状态。`),!1;const re=s.startsWith("bay")?me:he,k=d!=null&&d.version?d.version+1:1;return re(B=>B.map(ie=>ie.id===s?{...ie,...t,version:k}:ie)),(a==null?void 0:a.id)===s&&z(B=>({...B,...t,version:k})),!0},ae=async s=>{!y&&!f(a)||(ge(!0),await new Promise(t=>setTimeout(t,1500)),T(s,{status:"available",health:100,lastMaintenance:c(new Date,"yyyy-MM-dd"),nextMaintenance:c(X(new Date,6),"yyyy-MM-dd"),replacementHistory:[{id:`new-rep-${Date.now()}`,date:c(new Date,"yyyy-MM-dd"),partName:"系统全面巡检",reason:"自动化维保流程触发",performedBy:(l==null?void 0:l.name)||"System Auto"},...(a==null?void 0:a.replacementHistory)||[]]},a==null?void 0:a.version),ge(!1))},Ee=s=>{if(!J)return;const t=x.find(d=>d.id===v.projectId);if(!t)return;const r={id:`book-${Date.now()}`,projectId:t.id,projectName:t.name,startDate:v.startDate,endDate:v.endDate,reservedBy:(l==null?void 0:l.id)||"currentUser",usageType:"test",status:"active"};T(s.id,{status:"occupied",currentProjectId:t.id,currentProjectName:t.name,bookings:[r,...s.bookings]},s.version)&&W(!1)},Fe=s=>{f(a)&&T(s,{status:"available",currentProjectId:void 0,currentProjectName:void 0},a==null?void 0:a.version)},We=()=>{if(!a)return;const s={id:`rep-manual-${Date.now()}`,date:c(new Date,"yyyy-MM-dd"),partName:u.partName,reason:u.reason,performedBy:u.performedBy||(l==null?void 0:l.name)||"Unknown"};T(a.id,{replacementHistory:[s,...a.replacementHistory||[]]},a.version),fe(!1),R({partName:"",reason:"",performedBy:(l==null?void 0:l.name)||""})},ke=n.useMemo(()=>(C==="bay"?h:b).filter(t=>{var r;return t.name.toLowerCase().includes(E.toLowerCase())||(((r=t.currentProjectName)==null?void 0:r.toLowerCase())||"").includes(E.toLowerCase())}),[C,E,h,b]),we=n.useMemo(()=>[...h,...b].map(t=>({...t,riskScore:ms(t)})).filter(t=>t.riskScore>50).sort((t,r)=>r.riskScore-t.riskScore),[h,b]),Me=n.useMemo(()=>[...h,...b].map(t=>({id:t.id,name:t.name,type:t.model?"machine":"bay",nextMaintenance:t.nextMaintenance,health:t.health,status:t.status})).sort((t,r)=>new Date(t.nextMaintenance).getTime()-new Date(r.nextMaintenance).getTime()),[h,b]),le=n.useMemo(()=>{const s=h.length+b.length,t=[...h,...b].filter(d=>d.health<30).length,r=[...h,...b].filter(d=>d.status==="maintenance").length,$=[...h,...b].filter(d=>d.conflicts&&d.conflicts.length>0).length;return{total:s,lowHealth:t,maintenanceCount:r,conflictCount:$}},[h,b]),Re=n.useMemo(()=>{const s=Je(ts(S),{weekStartsOn:1}),t=ls(as(S),{weekStartsOn:1});return ss({start:s,end:t})},[S]),D=s=>{const t=c(s,"yyyy-MM-dd");return[...h,...b].filter(r=>r.status==="maintenance"?!1:!r.bookings.some(d=>t>=d.startDate&&t<=d.endDate))};return e.jsxs("div",{className:"space-y-6 animate-fadeIn pb-10 relative",children:[e.jsx(_,{children:Ne&&e.jsx(m.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"fixed top-8 left-1/2 -translate-x-1/2 z-[100] w-full max-w-xl",children:e.jsxs("div",{className:"bg-red-600 text-white p-4 rounded-2xl shadow-2xl flex items-center justify-between gap-4 border border-red-500 ring-4 ring-red-500/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"shrink-0",size:24}),e.jsx("p",{className:"text-sm font-bold leading-tight",children:Ne})]}),e.jsx(i,{variant:"outline",size:"sm",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 whitespace-nowrap",onClick:()=>{ye(null)},children:"我知道了"})]})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(Se,{className:"text-blue-600",size:32}),"物理资源智能管控中心"]}),e.jsx("p",{className:"text-slate-500 mt-1",children:"AI 驱动的 Bay 位分配、机器健康监控与冲突预警系统"})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full lg:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 mr-2",children:[e.jsxs(o,{variant:"outline",className:"border-slate-200 text-slate-500 bg-slate-50",children:["当前身份: ",y?"PMO核心管理":G?"项目经理":"普通协作员"]}),e.jsxs(i,{variant:"outline",size:"sm",className:`border-blue-200 text-blue-600 hover:bg-blue-50 font-black flex items-center gap-2 ${F?"animate-pulse":""}`,onClick:()=>{y&&(ue(!0),setTimeout(()=>{ue(!1),L(!0)},1200))},disabled:!y||F,children:[e.jsx(ne,{size:14,className:F?"animate-spin":""}),F?"正在拉取多维表格...":y?"同步飞书多维表格":"仅限 PMO 同步数据"]})]}),e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-1 rounded-xl flex w-full lg:w-auto overflow-x-auto shrink-0",children:[e.jsxs("button",{onClick:()=>P("monitor"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all whitespace-nowrap ${j==="monitor"?"bg-white dark:bg-slate-700 shadow-sm text-blue-600":"text-slate-500"}`,children:[e.jsx(Ue,{size:18})," 实时监控"]}),e.jsxs("button",{onClick:()=>P("risk"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all whitespace-nowrap ${j==="risk"?"bg-white dark:bg-slate-700 shadow-sm text-red-600 font-black":"text-slate-500"}`,children:[e.jsx(H,{size:18})," 风险预警",le.conflictCount>0&&e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),e.jsxs("button",{onClick:()=>P("maintenance"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all whitespace-nowrap ${j==="maintenance"?"bg-white dark:bg-slate-700 shadow-sm text-amber-600":"text-slate-500"}`,children:[e.jsx(de,{size:18})," 维护保养"]}),e.jsxs("button",{onClick:()=>P("calendar"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all whitespace-nowrap ${j==="calendar"?"bg-white dark:bg-slate-700 shadow-sm text-emerald-600":"text-slate-500"}`,children:[e.jsx(q,{size:18})," 空闲日历"]})]}),e.jsx(i,{variant:"outline",icon:ne,className:"hidden sm:flex",onClick:()=>{me([...Ie]),he([...Pe])},children:"同步最新数据"}),e.jsx(i,{variant:"primary",icon:K,className:"hidden sm:flex",children:"一键智能排期"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(p,{className:"p-4 bg-white dark:bg-slate-800 border-l-4 border-blue-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-500",children:"资源健康度 (平均)"}),e.jsx(Se,{size:18,className:"text-blue-500"})]}),e.jsx("div",{className:"text-2xl font-bold",children:"84%"}),e.jsx("div",{className:"mt-2 h-1.5 w-full bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 transition-all duration-1000",style:{width:"84%"}})})]}),e.jsxs(p,{className:"p-4 bg-white dark:bg-slate-800 border-l-4 border-red-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-500",children:"占用冲突"}),e.jsx(H,{size:18,className:"text-red-500"})]}),e.jsxs("div",{className:"text-2xl font-bold",children:[le.conflictCount," 项"]}),e.jsx("p",{className:"text-xs text-red-500 mt-1 font-medium italic",children:"涉及 4 个重点项目"})]}),e.jsxs(p,{className:"p-4 bg-white dark:bg-slate-800 border-l-4 border-amber-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-500",children:"近期维护"}),e.jsx(de,{size:18,className:"text-amber-500"})]}),e.jsxs("div",{className:"text-2xl font-bold font-mono",children:[le.maintenanceCount," 台"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1 font-medium",children:"未来 7 天内需保养"})]}),e.jsxs(p,{className:"p-4 bg-white dark:bg-slate-800 border-l-4 border-emerald-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 text-emerald-600",children:[e.jsx("span",{className:"text-sm font-medium",children:"推荐可用"}),e.jsx(Ke,{size:18})]}),e.jsx("div",{className:"text-2xl font-bold",children:"12 份建议"}),e.jsx("p",{className:"text-xs text-emerald-500 mt-1",children:"系统已找到最优替换方案"})]})]}),e.jsxs(_,{mode:"wait",children:[j==="monitor"&&e.jsx(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:e.jsxs(p,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1 rounded-xl",children:[e.jsx("button",{onClick:()=>oe("bay"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${C==="bay"?"bg-white dark:bg-slate-700 shadow-sm text-blue-600":"text-slate-500"}`,children:"Bay 状态"}),e.jsx("button",{onClick:()=>oe("machine"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${C==="machine"?"bg-white dark:bg-slate-700 shadow-sm text-blue-600":"text-slate-500"}`,children:"机器状态"})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:w-64",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"搜索资源或项目...",className:"w-full pl-10 pr-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 focus:ring-2 focus:ring-blue-500 outline-none",value:E,onChange:s=>Ae(s.target.value)})]}),e.jsxs("div",{className:"flex border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden",children:[e.jsx("button",{onClick:()=>xe("visual"),className:`p-2 ${O==="visual"?"bg-blue-600 text-white":"bg-white dark:bg-slate-800 text-slate-500"}`,children:e.jsx(is,{size:18})}),e.jsx("button",{onClick:()=>xe("list"),className:`p-2 ${O==="list"?"bg-blue-600 text-white":"bg-white dark:bg-slate-800 text-slate-500"}`,children:e.jsx(Ze,{size:18})})]})]})]}),O==="visual"?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-8 gap-4",children:ke.map(s=>e.jsxs(m.div,{layout:!0,onClick:()=>z(s),className:`relative p-4 rounded-2xl border transition-all cursor-pointer group ${s.status==="occupied"?"bg-blue-50/30 border-blue-100 dark:bg-blue-900/10 dark:border-blue-900/50":s.status==="maintenance"?"bg-amber-50/30 border-amber-100 dark:bg-amber-900/10 dark:border-amber-900/50":"bg-slate-50/30 border-slate-100 dark:bg-slate-800/50 dark:border-slate-700"} hover:shadow-lg hover:scale-[1.02]`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("div",{className:`p-2 rounded-xl ${s.status==="available"?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-500"}`,children:C==="bay"?e.jsx(w,{size:18}):e.jsx(M,{size:18})}),e.jsxs("div",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${s.health<40?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"}`,children:[Math.round(s.health),"% 健康"]})]}),e.jsx("div",{className:"text-sm font-extrabold truncate",children:s.name}),e.jsx("div",{className:"text-[10px] text-slate-400 mt-1 uppercase font-bold tracking-tighter",children:C==="bay"?`SIZE: ${s.size}`:`MOD: ${s.model}`}),e.jsx("div",{className:"mt-4",children:s.currentProjectName?e.jsxs("div",{className:"p-2 rounded-lg bg-white/60 dark:bg-slate-800/60 border border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:"text-[10px] text-slate-400 font-medium",children:"使用中"}),e.jsx("div",{className:"text-[11px] font-bold truncate text-blue-600",children:s.currentProjectName})]}):e.jsx("div",{className:`text-[10px] font-bold py-1 px-2 rounded-full w-fit ${s.status==="maintenance"?"bg-amber-100 text-amber-600":"bg-emerald-100 text-emerald-600"}`,children:s.status==="maintenance"?"维护中":"可预约"})}),s.conflicts&&s.conflicts.length>0&&e.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-lg ring-2 ring-white animate-bounce",children:e.jsx(H,{size:12})})]},s.id))}):e.jsx("div",{className:"border border-slate-100 dark:border-slate-800 rounded-2xl overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 text-slate-400 text-xs font-bold uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"资源名称"}),e.jsx("th",{className:"px-6 py-4",children:"健康度"}),e.jsx("th",{className:"px-6 py-4",children:"状态"}),e.jsx("th",{className:"px-6 py-4",children:"归属/冲突"}),e.jsx("th",{className:"px-6 py-4",children:"下次维护"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-800",children:ke.map(s=>e.jsxs("tr",{className:"hover:bg-blue-50/20 dark:hover:bg-blue-900/5 transition-colors group cursor-pointer",onClick:()=>z(s),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-800 rounded-lg group-hover:text-blue-500",children:C==="bay"?e.jsx(w,{size:18}):e.jsx(M,{size:18})}),e.jsx("span",{className:"font-bold",children:s.name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-1.5 w-16 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${s.health>70?"bg-emerald-500":s.health>40?"bg-amber-500":"bg-red-500"}`,style:{width:`${s.health}%`}})}),e.jsxs("span",{className:"text-xs font-mono",children:[Math.round(s.health),"%"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(o,{variant:s.status==="available"?"success":s.status==="occupied"?"primary":"warning",children:s.status==="available"?"可用":s.status==="occupied"?"占用":"维护"})}),e.jsx("td",{className:"px-6 py-4",children:s.conflicts&&s.conflicts.length>0?e.jsxs("div",{className:"flex items-center gap-1.5 text-red-500 font-bold text-xs",children:[e.jsx(H,{size:14})," 预定冲突"]}):s.currentProjectName?e.jsx("span",{className:"text-sm font-medium",children:s.currentProjectName}):e.jsx("span",{className:"text-xs text-slate-300 italic",children:"空闲"})}),e.jsx("td",{className:"px-6 py-4 text-xs font-medium text-slate-500",children:s.nextMaintenance})]},s.id))})]})})]})},"monitor"),j==="risk"&&e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs(p,{className:"p-6 lg:col-span-1 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-black uppercase tracking-widest text-slate-400 mb-4",children:"风险分级过滤"}),e.jsx("div",{className:"space-y-2",children:[{label:"极高风险",count:2,color:"bg-red-500",active:!0},{label:"中高风险",count:5,color:"bg-orange-500",active:!1},{label:"一般风险",count:8,color:"bg-amber-500",active:!1},{label:"潜在风险",count:12,color:"bg-blue-500",active:!1}].map(s=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl border cursor-pointer transition-all ${s.active?"bg-slate-50 border-blue-200 ring-1 ring-blue-100":"border-transparent hover:bg-slate-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s.color}`}),e.jsx("span",{className:"text-sm font-bold text-slate-700",children:s.label})]}),e.jsx("span",{className:"text-xs font-mono text-slate-400",children:s.count})]},s.label))})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-100",children:[e.jsx("h4",{className:"text-sm font-black uppercase tracking-widest text-slate-400 mb-4",children:"智能诊断报告"}),e.jsxs("div",{className:"p-4 bg-blue-50/50 rounded-2xl border border-blue-100",children:[e.jsxs("p",{className:"text-xs text-blue-700 leading-relaxed font-medium",children:["检测到 ",e.jsx("span",{className:"font-black",children:"Bay 04"})," 与 ",e.jsx("span",{className:"font-black",children:"Bay 07"})," 存在长期占用冲突，建议将 ",e.jsx("span",{className:"underline italic",children:"Project Apollo"})," 的部分测试迁移至研发二号楼空置区域。"]}),e.jsx(i,{variant:"ghost",size:"sm",className:"mt-3 text-blue-600 font-black p-0 h-auto hover:bg-transparent",children:"生成调优方案库 →"})]})]})]}),e.jsxs(p,{className:"p-6 lg:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(H,{size:24,className:"text-red-500"}),"关键冲突与风险清单"]}),e.jsxs(o,{variant:"outline",className:"text-red-500 border-red-200",children:["待处理: ",we.length]})]}),e.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 scrollbar-hide",children:we.map(s=>{var t;return e.jsxs("div",{className:"group p-5 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-3xl hover:shadow-xl hover:border-red-200 transition-all flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"shrink-0 w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-2xl flex flex-col items-center justify-center border border-red-200",children:[e.jsx("span",{className:"text-[10px] font-black text-red-600 line-height-1",children:"SCORE"}),e.jsx("span",{className:"text-lg font-black text-red-700",children:s.riskScore})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-black text-slate-900 dark:text-slate-100",children:s.name}),e.jsx(o,{variant:"neutral",size:"sm",className:"text-[10px]",children:s.model||s.size})]}),e.jsxs("div",{className:"text-xs text-slate-400 mt-0.5 font-medium",children:["当前状态: ",e.jsx("span",{className:"text-blue-500",children:s.status})," · 最后维护: ",s.lastMaintenance]})]})]}),e.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(i,{variant:"ghost",size:"sm",className:"p-2",children:e.jsx(rs,{size:16})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-red-50/30 dark:bg-red-900/5 rounded-2xl border border-red-50 dark:border-red-900/10",children:[e.jsx("div",{className:"text-[10px] uppercase font-black text-red-400 mb-1",children:"预定冲突"}),e.jsx("div",{className:"text-xs font-bold text-slate-700 dark:text-slate-200 truncate",children:(t=s.conflicts)!=null&&t.length?`${s.conflicts.length} 个重叠预定`:"暂无显著冲突"})]}),e.jsxs("div",{className:"p-3 bg-amber-50/30 dark:bg-amber-900/5 rounded-2xl border border-amber-50 dark:border-amber-900/10",children:[e.jsx("div",{className:"text-[10px] uppercase font-black text-amber-400 mb-1",children:"健康警报"}),e.jsxs("div",{className:"text-xs font-bold text-slate-700 dark:text-slate-200",children:["健康度 ",Math.round(s.health),"% ",s.health<40?"· 建议停机检修":""]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",className:"flex-1 bg-white text-[11px] h-9",onClick:()=>z(s),children:"调配处理明细"}),s.health<40?e.jsx(i,{variant:"primary",size:"sm",className:"flex-1 bg-amber-500 border-none text-[11px] h-9",onClick:()=>ae(s.id),disabled:A||!f(s),children:A?"执行中...":f(s)?"一键维保修复":"权限受限"}):e.jsx(i,{variant:"primary",size:"sm",className:"flex-1 bg-red-600 border-none text-[11px] h-9",children:"紧急联系 PM"})]})]},s.id)})})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(p,{className:"p-6 bg-gradient-to-br from-slate-900 to-indigo-900 text-white border-none shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute -right-10 -top-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),e.jsxs("h4",{className:"font-black text-lg mb-4 flex items-center gap-2",children:[e.jsx(K,{size:20,className:"text-yellow-400 fill-current"}),"AI 自动调优引擎"]}),e.jsx("p",{className:"text-sm text-slate-300 mb-6 leading-relaxed italic",children:'"基于当前项目优先级（Priority Score），我为您找到了 2 个可调用的冗余资源。"'}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10 backdrop-blur-xl",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-[10px] font-black text-indigo-300 uppercase",children:"策略 A"}),e.jsx(o,{variant:"success",size:"sm",className:"bg-emerald-500/20 text-emerald-300 border-none h-4 text-[9px]",children:"建议采纳"})]}),e.jsx("div",{className:"text-xs font-bold leading-relaxed transition-all hover:text-blue-300 cursor-pointer",children:"将 [uCT 510 #2] 的维护时间提前 2 天，可完全释放 [Project Mars] 的上电窗口。"})]}),e.jsx(i,{className:"w-full bg-white text-indigo-950 border-none font-black hover:bg-slate-100 mt-4 rounded-xl py-5",children:"执行自动化调优"})]})]}),e.jsxs(p,{className:"p-6",children:[e.jsxs("h4",{className:"font-bold mb-6 flex items-center gap-2 underline decoration-blue-500/30 underline-offset-4",children:[e.jsx(qe,{size:18,className:"text-blue-500"}),"资源负载预测 (30D)"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-end gap-1.5 h-32",children:[30,45,85,95,70,50,40,35,60,90,80,55].map((s,t)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:"relative w-full h-full flex items-end",children:e.jsx("div",{className:`w-full rounded-t-lg transition-all duration-700 ${s>=90?"bg-red-500":s>=70?"bg-amber-500":"bg-blue-400"} group-hover:scale-y-110 group-hover:brightness-110`,style:{height:`${s}%`}})}),e.jsxs("span",{className:"text-[8px] font-bold text-slate-400",children:["W",t+1]})]},t))}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-3 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-600 dark:text-slate-400",children:[e.jsx(ze,{size:14,className:"text-blue-500"}),"W4 预测负载峰值 95%"]}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"受 [大里程碑交付] 影响，建议提前锁定备用物理机。"})]})]})]})]})]})},"risk"),j==="maintenance"&&e.jsx(m.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(p,{className:"p-6 lg:col-span-3 bg-white dark:bg-slate-800 border-none shadow-sm flex flex-wrap items-center justify-between gap-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-4 bg-amber-100 text-amber-600 rounded-2xl",children:e.jsx(ns,{size:32})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black",children:"维护与资产生命周期"}),e.jsxs("p",{className:"text-slate-400 text-sm",children:["当前共有 ",e.jsx("span",{className:"text-amber-600 font-bold",children:"6"})," 台设备处于待保养状态"]})]})]}),e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-black uppercase tracking-widest text-slate-400 mb-1",children:"本月完成度"}),e.jsx("div",{className:"text-2xl font-black text-slate-900 dark:text-slate-100",children:"92%"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-black uppercase tracking-widest text-slate-400 mb-1",children:"备件库存"}),e.jsx("div",{className:"text-2xl font-black text-emerald-500",children:"充足"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-black uppercase tracking-widest text-slate-400 mb-1",children:"平均停机时长"}),e.jsx("div",{className:"text-2xl font-black text-blue-500",children:"4.2h"})]}),e.jsx(i,{variant:"primary",icon:Be,className:"bg-amber-500 border-none",onClick:()=>se(!0),children:"查看保养排期表"})]})]}),e.jsxs(p,{className:"p-6 lg:col-span-2",children:[e.jsxs("h4",{className:"text-sm font-black uppercase tracking-widest text-slate-400 mb-6 flex items-center gap-2",children:[e.jsx(De,{size:16})," 待处理任务流水线 (Pipeline)"]}),e.jsx("div",{className:"space-y-4",children:[...h,...b].filter(s=>s.health<60).slice(0,5).map(s=>e.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-800 rounded-3xl hover:bg-slate-50/50 transition-all flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-800 rounded-2xl group-hover:scale-110 transition-transform",children:s.model?e.jsx(M,{size:24,className:"text-slate-400"}):e.jsx(w,{size:24,className:"text-slate-400"})}),s.health<40&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-black text-slate-900 dark:text-slate-100",children:s.name}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsxs(o,{variant:"outline",size:"sm",className:"text-[10px] opacity-60",children:["最近保养: ",s.lastMaintenance]}),e.jsxs("span",{className:"text-[10px] text-slate-400 font-mono",children:["ID: ",s.id]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[10px] font-black text-amber-500 uppercase",children:"下期计划"}),e.jsx("div",{className:"text-sm font-black text-slate-700 dark:text-slate-200",children:s.nextMaintenance})]}),e.jsxs("div",{className:"w-16",children:[e.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase mb-1",children:"健康度"}),e.jsx("div",{className:"h-1.5 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${s.health<40?"bg-red-500":"bg-amber-500"}`,style:{width:`${s.health}%`}})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"ghost",size:"sm",className:"p-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>z(s),children:e.jsx(ze,{size:18})}),e.jsx(i,{variant:"outline",size:"sm",className:`font-black h-9 text-xs transition-all ${s.health<40&&f(s)?"bg-red-50 text-red-600 border-red-100 animate-pulse":"bg-white border-slate-200 text-amber-600"}`,onClick:()=>ae(s.id),disabled:A||!f(s),children:A?"处理中...":f(s)?"执行维保":"权限受限"})]})]})]},s.id))})]}),e.jsxs("div",{className:"space-y-6 lg:col-span-1",children:[e.jsxs(p,{className:"p-6",children:[e.jsxs("h4",{className:"text-sm font-black uppercase tracking-widest text-slate-400 mb-6 flex items-center gap-2",children:[e.jsx(ds,{size:16})," 备机与配件状态"]}),e.jsxs("div",{className:"space-y-4",children:[[{name:"测试机架备件",status:"充足",stock:12},{name:"CT 球管 (通用)",status:"低库存",stock:2},{name:"高压屏蔽线",status:"缺货",stock:0},{name:"精密电源模块",status:"充足",stock:8}].map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900/50 rounded-2xl border border-transparent hover:border-slate-200 transition-all",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:s.name}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:["当前剩余: ",s.stock," 套"]})]}),e.jsx(o,{variant:s.status==="充足"?"success":s.status==="低库存"?"warning":"danger",size:"sm",children:s.status})]},s.name)),e.jsx(i,{variant:"ghost",size:"sm",className:"w-full text-blue-600 font-black mt-2",children:"申请备件采购 →"})]})]}),e.jsxs(p,{className:"p-6 bg-emerald-600 text-white border-none shadow-xl",children:[e.jsxs("h4",{className:"font-black text-lg mb-4 flex items-center gap-2",children:[e.jsx($e,{size:24}),"维保合同总控"]}),e.jsxs("p",{className:"text-xs text-emerald-100 leading-relaxed mb-6",children:["检测到 8 台 ",e.jsx("span",{className:"font-black underline italic",children:"uCT 系列"})," 设备本月即将保修到期，建议立即启动续签。"]}),e.jsxs("div",{className:"py-2 border-y border-white/20 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold py-1",children:[e.jsx("span",{children:"合同总值"}),e.jsx("span",{children:"¥ 1,240,000"})]}),e.jsxs("div",{className:"flex justify-between text-xs font-bold py-1 text-emerald-200",children:[e.jsx("span",{children:"生效中"}),e.jsx("span",{children:"14 份"})]})]}),e.jsx(i,{className:"w-full bg-white text-emerald-600 border-none font-black hover:bg-emerald-50 rounded-xl",children:"管理所有服务合同"})]})]})]})},"maintenance"),j==="calendar"&&e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:e.jsxs(p,{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-black flex items-center gap-3",children:[e.jsx(q,{size:28,className:"text-emerald-500"}),"资源预约可用性日历"]}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"展示每日未被占用的实验室 Bay 位与高价值机器"})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-slate-100 dark:bg-slate-800 p-1 rounded-2xl",children:[e.jsx("button",{onClick:()=>be(es(S,1)),className:"p-2 hover:bg-white dark:hover:bg-slate-700 rounded-xl transition-all",children:e.jsx(Xe,{size:20})}),e.jsx("span",{className:"font-black px-4",children:c(S,"yyyy年 M月")}),e.jsx("button",{onClick:()=>be(X(S,1)),className:"p-2 hover:bg-white dark:hover:bg-slate-700 rounded-xl transition-all",children:e.jsx(Ye,{size:20})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-px bg-slate-200 dark:bg-slate-700 rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-700 shadow-sm",children:[["周一","周二","周三","周四","周五","周六","周日"].map(s=>e.jsx("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 text-center text-xs font-black text-slate-400 uppercase tracking-widest",children:s},s)),Re.map((s,t)=>{const r=D(s),$=c(s,"M")===c(S,"M"),d=r.filter(k=>k.id.startsWith("bay")).length,re=r.filter(k=>k.id.startsWith("mach")).length;return e.jsxs("div",{onClick:()=>Y(s),className:`min-h-[140px] p-4 bg-white dark:bg-slate-900 transition-all hover:bg-slate-50 dark:hover:bg-slate-800 flex flex-col gap-2 cursor-pointer border-2 ${$?"border-transparent":"opacity-30 grayscale"} ${g&&c(s,"yyyy-MM-dd")===c(g,"yyyy-MM-dd")?"border-emerald-500 shadow-lg scale-[1.02] z-10":"hover:border-slate-100 dark:hover:border-slate-700"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm font-black ${xs(s)?"bg-blue-600 text-white w-7 h-7 flex items-center justify-center rounded-full ring-4 ring-blue-500/20":"text-slate-700 dark:text-slate-300"}`,children:c(s,"d")}),r.length>20&&e.jsx(o,{variant:"success",size:"sm",className:"bg-emerald-500/10 text-emerald-500 border-none px-1.5 h-4 text-[9px]",children:"资源充足"})]}),e.jsxs("div",{className:"mt-2 space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] font-bold p-1.5 bg-blue-50/50 dark:bg-blue-900/10 rounded-lg text-blue-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(w,{size:10})," Bay 位可用"]}),e.jsx("span",{children:d})]}),e.jsxs("div",{className:"flex items-center justify-between text-[10px] font-bold p-1.5 bg-amber-50/50 dark:bg-amber-900/10 rounded-lg text-amber-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(M,{size:10})," 机器可用"]}),e.jsx("span",{children:re})]})]}),$&&e.jsx("div",{className:"mt-auto pt-2",children:e.jsxs("div",{className:"flex -space-x-1.5 overflow-hidden",children:[r.slice(0,3).map((k,B)=>e.jsx("div",{className:"w-5 h-5 rounded-full bg-slate-100 border border-white flex items-center justify-center text-[8px] font-black text-slate-500",children:k.name.split(" ")[0][0]},B)),r.length>3&&e.jsxs("div",{className:"text-[10px] text-slate-400 font-bold ml-1.5 flex items-center",children:["+",r.length-3]})]})})]},t)})]})]})},"calendar")]}),e.jsxs(_,{children:[a&&e.jsxs(e.Fragment,{children:[e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{z(null),W(!1)},className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-50 block"}),e.jsxs(m.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 bottom-0 w-full max-w-lg bg-white dark:bg-slate-900 z-[60] shadow-2xl overflow-y-auto p-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-4 bg-blue-100 text-blue-600 rounded-3xl",children:a.model?e.jsx(M,{size:32}):e.jsx(w,{size:32})}),e.jsxs("div",{className:"flex-1",children:[Oe&&y?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",autoFocus:!0,className:"text-2xl font-black bg-white dark:bg-slate-800 border-b-2 border-blue-500 outline-none w-full",value:te,onChange:s=>ve(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(T(a.id,{name:te},a.version),V(!1))}}),e.jsx(i,{size:"sm",variant:"ghost",className:"text-blue-600",onClick:()=>{T(a.id,{name:te},a.version),V(!1)},children:"保存"})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-2xl font-black",children:a.name}),y&&e.jsx(i,{variant:"ghost",size:"sm",className:"text-[10px] font-black uppercase text-slate-400 p-0 h-auto hover:text-blue-600",onClick:()=>{ve(a.name),V(!0)},children:"[编辑名称]"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(o,{variant:a.status==="available"?"success":a.status==="occupied"?"primary":"warning",children:a.status==="available"?"可用":a.status==="occupied"?"占用":"维护"}),e.jsxs("span",{className:"text-xs text-slate-400 font-mono",children:["ID: ",a.id]})]})]})]}),e.jsx("button",{onClick:()=>{z(null),V(!1)},className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:e.jsx(U,{size:20})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 rounded-2xl",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"健康指数"}),e.jsxs("div",{className:`text-xl font-black ${os(a.health)} inline-block px-3 py-1 rounded-lg`,children:[Math.round(a.health)," / 100"]})]}),e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 rounded-2xl",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"本月运行时长"}),e.jsx("div",{className:"text-xl font-black",children:"168 小时"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-black uppercase tracking-widest text-slate-400 mb-4 flex items-center gap-2",children:[e.jsx(K,{size:16})," 快速操作"]}),e.jsxs("div",{className:"space-y-4",children:[a.status==="occupied"?f(a)?e.jsx(i,{variant:"outline",className:"w-full justify-center border-red-200 text-red-600 hover:bg-red-50 py-6 text-sm font-black",onClick:()=>Fe(a.id),children:"结束当前项目使用 (释放)"}):e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 rounded-2xl border border-dashed border-slate-200 text-center",children:[e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"权限受限"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"仅预定人可以管理或释放此设备"})]}):a.status==="available"?e.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-3xl border border-slate-100 dark:border-slate-700 space-y-4",children:He?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-1",children:"关联项目"}),e.jsxs("select",{className:"w-full mt-1 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500",value:v.projectId,onChange:s=>ee({...v,projectId:s.target.value}),children:[e.jsx("option",{value:"",children:"请选择项目..."}),x.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-1",children:"开始日期"}),e.jsx("input",{type:"date",className:"w-full mt-1 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 text-xs",value:v.startDate,onChange:s=>ee({...v,startDate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-1",children:"结束日期"}),e.jsx("input",{type:"date",className:"w-full mt-1 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 text-xs",value:v.endDate,onChange:s=>ee({...v,endDate:s.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(i,{variant:"ghost",className:"flex-1 text-xs",onClick:()=>W(!1),children:"取消"}),e.jsx(i,{variant:"primary",className:"flex-1 text-xs",disabled:!v.projectId,onClick:()=>Ee(a),children:"确认预定"})]})]}):e.jsx(i,{variant:"primary",className:"w-full py-6 text-sm font-black shadow-lg shadow-blue-500/20",onClick:()=>W(!0),disabled:!J,children:J?"立即为项目预定":"暂无预定权限"})}):e.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/10 rounded-2xl border border-amber-100 dark:border-amber-900/30",children:e.jsx("p",{className:"text-xs text-amber-600 font-medium text-center italic",children:"设备维护中，暂不可用"})}),e.jsx(i,{variant:"outline",icon:de,className:"w-full justify-center py-4 text-xs font-bold",onClick:()=>ae(a.id),disabled:A||!f(a),children:A?"正在同步维保数据...":f(a)?"执行一键维保/校准":"仅限PMO管理未占用设备"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-black uppercase tracking-widest text-slate-400 mb-4 flex items-center gap-4",children:[e.jsx(q,{size:16})," 预定排程周期",e.jsxs(o,{variant:"neutral",className:"ml-auto text-[10px]",children:[a.bookings.length," 记录"]})]}),e.jsx("div",{className:"space-y-3",children:a.bookings.map(s=>e.jsxs("div",{className:"p-4 border border-slate-100 dark:border-slate-800 rounded-2xl flex justify-between items-center group hover:border-blue-200 transition-colors",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm text-slate-900 dark:text-slate-100",children:s.projectName}),e.jsxs("div",{className:"text-xs text-slate-400",children:[s.startDate," 至 ",s.endDate]})]}),e.jsx(o,{variant:"outline",className:"opacity-60 group-hover:opacity-100 transition-opacity",children:"已确认"})]},s.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"text-sm font-black uppercase tracking-widest text-slate-400 flex items-center gap-2",children:[e.jsx(De,{size:16})," 变更与维护日志"]}),e.jsx(i,{variant:"ghost",size:"sm",className:"text-[10px] font-black uppercase text-blue-600 p-0 h-auto",onClick:()=>fe(!Q),children:Q?"取消录入":"+ 手动录入记录"})]}),Q&&e.jsxs("div",{className:"mb-6 p-5 bg-blue-50/30 dark:bg-blue-900/10 rounded-3xl border border-blue-100 dark:border-blue-900/30 space-y-4 animate-fadeIn",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-1",children:"部件/项目名称"}),e.jsx("input",{type:"text",placeholder:"例如: 传感器组件",className:"w-full mt-1 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 text-xs",value:u.partName,onChange:s=>R({...u,partName:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-1",children:"执行人员"}),e.jsx("input",{type:"text",className:"w-full mt-1 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 text-xs",value:u.performedBy,onChange:s=>R({...u,performedBy:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-1",children:"详情描述 / 变更原因"}),e.jsx("textarea",{className:"w-full mt-1 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 text-xs h-20",value:u.reason,onChange:s=>R({...u,reason:s.target.value})})]}),e.jsx(i,{variant:"primary",className:"w-full h-10 text-xs rounded-xl",disabled:!u.partName||!u.reason,onClick:We,children:"确认保存并追加日志"})]}),e.jsxs("div",{className:"space-y-4",children:[(Ce=a.replacementHistory)==null?void 0:Ce.map(s=>e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 rounded-2xl border-l-4 border-amber-500",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-xs font-black text-amber-600 uppercase",children:"部件更换"}),e.jsx("span",{className:"text-[10px] text-slate-400",children:s.date})]}),e.jsx("div",{className:"text-sm font-black text-slate-900 dark:text-slate-100",children:s.partName}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["原因: ",s.reason]}),e.jsxs("div",{className:"text-[10px] text-slate-400 mt-2 font-medium",children:["执行人: ",s.performedBy]})]},s.id)),(!a.replacementHistory||a.replacementHistory.length===0)&&e.jsx("div",{className:"text-sm text-slate-400 italic p-4 text-center border-2 border-dashed border-slate-100 rounded-2xl",children:"暂无重大部件更换记录"})]})]})]})]})]}),g&&e.jsxs(e.Fragment,{children:[e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Y(null),className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-50 block"}),e.jsxs(m.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 bottom-0 w-full max-w-lg bg-white dark:bg-slate-900 z-[60] shadow-2xl overflow-y-auto p-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-4 bg-emerald-100 text-emerald-600 rounded-3xl",children:e.jsx(q,{size:32})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black",children:c(g,"yyyy年 MM月 dd日")}),e.jsx("div",{className:"text-xs text-slate-400 mt-1 font-bold italic uppercase tracking-widest",children:"当日空闲资源明细"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>Y(null),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:e.jsx(U,{size:20})})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>pe("bay"),className:`p-5 rounded-3xl border-2 transition-all text-left ${N==="bay"?"bg-blue-50/50 border-blue-500 ring-4 ring-blue-500/10":"bg-slate-50 border-slate-100 dark:bg-slate-800 dark:border-slate-700 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`text-[10px] font-black uppercase ${N==="bay"?"text-blue-500":"text-slate-400"}`,children:"可用 Bay 位"}),e.jsx(w,{size:14,className:N==="bay"?"text-blue-500":"text-slate-400"})]}),e.jsxs("div",{className:`text-2xl font-black ${N==="bay"?"text-blue-700 dark:text-blue-400":"text-slate-500"}`,children:[D(g).filter(s=>s.id.startsWith("bay")).length," 组"]})]}),e.jsxs("button",{onClick:()=>pe("machine"),className:`p-5 rounded-3xl border-2 transition-all text-left ${N==="machine"?"bg-amber-50/50 border-amber-500 ring-4 ring-amber-500/10":"bg-slate-50 border-slate-100 dark:bg-slate-800 dark:border-slate-700 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`text-[10px] font-black uppercase ${N==="machine"?"text-amber-500":"text-slate-400"}`,children:"可用机器"}),e.jsx(M,{size:14,className:N==="machine"?"text-amber-500":"text-slate-400"})]}),e.jsxs("div",{className:`text-2xl font-black ${N==="machine"?"text-amber-700 dark:text-amber-400":"text-slate-500"}`,children:[D(g).filter(s=>s.id.startsWith("mach")).length," 台"]})]})]}),e.jsx(_,{mode:"wait",children:N==="bay"?e.jsxs(m.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("h4",{className:"text-sm font-black uppercase tracking-widest text-slate-400 flex items-center gap-2",children:[e.jsx(w,{size:16})," 可用 Bay 位列表"]}),e.jsxs(o,{variant:"outline",className:"text-[10px] border-blue-200 text-blue-500",children:[D(g).filter(s=>s.id.startsWith("bay")).length," 组"]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:D(g).filter(s=>s.id.startsWith("bay")).map(s=>e.jsxs("div",{className:"p-5 bg-white dark:bg-slate-800 rounded-3xl border border-slate-100 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-900 transition-all flex items-center justify-between group shadow-sm hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/20 rounded-2xl flex items-center justify-center font-black text-blue-600 text-sm ring-1 ring-blue-100 transition-transform group-hover:scale-110",children:s.size}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:s.name}),e.jsxs("div",{className:"text-[10px] text-slate-400 font-mono mt-0.5",children:["尺寸规格: ",s.size," 型实验室"]})]})]}),e.jsx(o,{variant:"success",size:"sm",className:"bg-emerald-50 text-emerald-600 border-none px-3",children:"空闲"})]},s.id))})]},"bay-list"):e.jsxs(m.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("h4",{className:"text-sm font-black uppercase tracking-widest text-slate-400 flex items-center gap-2",children:[e.jsx(M,{size:16})," 可用机器列表"]}),e.jsxs(o,{variant:"outline",className:"text-[10px] border-amber-200 text-amber-500",children:[D(g).filter(s=>s.id.startsWith("mach")).length," 台"]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:D(g).filter(s=>s.id.startsWith("mach")).map(s=>e.jsxs("div",{className:"p-5 bg-white dark:bg-slate-800 rounded-3xl border border-slate-100 dark:border-slate-700 hover:border-amber-300 dark:hover:border-amber-900 transition-all flex items-center justify-between group shadow-sm hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 dark:bg-amber-900/20 rounded-2xl flex items-center justify-center font-black text-amber-600 text-[10px] text-center p-1 leading-none ring-1 ring-amber-100 transition-transform group-hover:scale-110 shrink-0",children:s.model.includes(" ")?e.jsxs(e.Fragment,{children:[s.model.split(" ")[0],e.jsx("br",{}),s.model.split(" ")[1]]}):s.model}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100 truncate",children:s.name}),e.jsxs("div",{className:"text-[10px] text-slate-400 font-mono mt-0.5 truncate",children:["型号参数: ",s.model]})]})]}),e.jsx(o,{variant:"success",size:"sm",className:"bg-emerald-50 text-emerald-600 border-none px-3 shrink-0",children:"就绪"})]},s.id))})]},"mach-list")})]}),e.jsxs("div",{className:"mt-10 p-6 bg-emerald-500/5 dark:bg-emerald-500/10 rounded-3xl border-2 border-dashed border-emerald-500/30 flex flex-col items-center text-center",children:[e.jsx(K,{className:"text-emerald-500 mb-2",size:32}),e.jsx("div",{className:"text-sm font-black text-emerald-700 dark:text-emerald-400",children:"快速抢占预约"}),e.jsx("p",{className:"text-xs text-emerald-600/70 dark:text-emerald-500/60 mt-1 max-w-[240px]",children:"由于这些资源当日处于空闲状态，您可以直接发起临时锁定请求。"}),e.jsx(i,{className:"mt-5 bg-emerald-600 border-none text-xs h-10 px-8 rounded-xl hover:bg-emerald-700 shadow-lg shadow-emerald-500/20",children:"发起快速预约"})]})]})]}),Te&&e.jsxs(e.Fragment,{children:[e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>L(!1),className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[70] block"}),e.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4 pointer-events-none",children:e.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-2xl bg-white dark:bg-slate-900 shadow-2xl rounded-[40px] overflow-hidden p-10 border border-white/20 pointer-events-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-3xl flex items-center justify-center shadow-lg shadow-blue-500/30",children:e.jsx(ne,{size:32,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black",children:"接入飞书多维表格 (Bitable)"}),e.jsx("p",{className:"text-slate-400 mt-1 font-medium",children:"通过飞书 API 实时同步 Bay 位与设备状态信息"})]})]}),e.jsx("button",{onClick:()=>L(!1),className:"p-3 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full",children:e.jsx(U,{size:24})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-6 rounded-3xl border border-slate-100 dark:border-slate-700",children:[e.jsx("h4",{className:"text-[10px] font-black text-blue-500 uppercase tracking-widest mb-4",children:"连接配置"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 ml-1",children:"APP ACCESS TOKEN"}),e.jsx("input",{type:"password",value:"************************",readOnly:!0,className:"w-full mt-1 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 text-xs font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 ml-1",children:"BITABLE APP ID"}),e.jsx("input",{type:"text",value:"bascn****************",readOnly:!0,className:"w-full mt-1 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 text-xs font-mono"})]}),e.jsx(i,{variant:"primary",className:"w-full h-11 text-xs",children:"重新验证连接"})]})]}),e.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/10 rounded-2xl border border-emerald-100 dark:border-emerald-900/20 flex items-start gap-3",children:[e.jsx($e,{size:20,className:"text-emerald-500 shrink-0"}),e.jsxs("p",{className:"text-[11px] text-emerald-700 dark:text-emerald-400 leading-relaxed",children:["数据同步采用 ",e.jsx("span",{className:"font-black italic",children:"Incremental Sync"})," 增量模式。检测到多维表格中字段定义已自动对齐。"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-2",children:"操作步骤说明"}),[{step:"01",title:"创建自建应用",desc:"在飞书开放平台创建一个企业自建应用，并开启“多维表格”权限。"},{step:"02",title:"获取凭证",desc:"获取 App ID 和 App Secret，并在“应用发布”中进行版本发布。"},{step:"03",title:"添加表格引用",desc:"在需要同步的 Bitable 顶部点击“更多-添加文档助手”，将该应用添加为协同者。"},{step:"04",title:"字段映射",desc:"确保表格包含：[资源ID]、[当前状态]、[健康度]、[锁定项目] 等关键列。"}].map(s=>e.jsxs("div",{className:"flex gap-4 p-4 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-2xl transition-all group",children:[e.jsx("div",{className:"text-lg font-black text-blue-200 group-hover:text-blue-500 transition-colors uppercase font-mono",children:s.step}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-black text-slate-800 dark:text-slate-100",children:s.title}),e.jsx("div",{className:"text-xs text-slate-400 mt-1 leading-relaxed",children:s.desc})]})]},s.step))]})]}),e.jsxs("div",{className:"mt-10 flex gap-4",children:[e.jsx(i,{variant:"ghost",className:"flex-1 h-12 rounded-2xl",onClick:()=>L(!1),children:"稍后配置"}),e.jsx(i,{variant:"primary",className:"flex-[2] h-12 rounded-2xl bg-blue-600 shadow-xl shadow-blue-500/20",onClick:()=>L(!1),children:"立即保存并激活同步"})]})]})})]}),Le&&e.jsxs(e.Fragment,{children:[e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>se(!1),className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[70] block"}),e.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4 pointer-events-none",children:e.jsxs(m.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-4xl max-h-[85vh] bg-white dark:bg-slate-900 shadow-2xl rounded-[40px] overflow-hidden flex flex-col border border-white/20 pointer-events-auto",children:[e.jsxs("div",{className:"p-10 pb-6 flex justify-between items-center border-b border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-16 h-16 bg-amber-500 rounded-3xl flex items-center justify-center shadow-lg shadow-amber-500/30",children:e.jsx(Be,{size:32,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black",children:"资产保养排期表"}),e.jsx("p",{className:"text-slate-400 mt-1 font-medium",children:"全量硬件设备预防性维护(PM)计划看板"})]})]}),e.jsx("button",{onClick:()=>se(!1),className:"p-3 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:e.jsx(U,{size:24})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-10 pt-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[{label:"本周待处理",count:3,color:"text-red-500",bg:"bg-red-50"},{label:"下周计划",count:5,color:"text-amber-500",bg:"bg-amber-50"},{label:"本月预计",count:12,color:"text-blue-500",bg:"bg-blue-50"}].map(s=>e.jsxs("div",{className:`${s.bg} dark:bg-slate-800 p-6 rounded-3xl border border-white/10`,children:[e.jsx("div",{className:"text-[10px] font-black uppercase text-slate-400 mb-2",children:s.label}),e.jsxs("div",{className:`text-3xl font-black ${s.color}`,children:[s.count," ",e.jsx("span",{className:"text-sm font-medium opacity-60",children:"项"})]})]},s.label))}),e.jsx("div",{className:"space-y-12",children:["2026年 01月","2026年 02月"].map(s=>e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-black uppercase tracking-[0.2em] text-slate-400 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"})," ",s]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Me.filter(t=>c(new Date(t.nextMaintenance),"yyyy年 MM月")===s).map(t=>{const r=new Date(t.nextMaintenance)<new Date;return e.jsxs("div",{className:"p-5 bg-slate-50 dark:bg-slate-800/50 rounded-3xl border border-slate-100 dark:border-slate-700 hover:border-amber-300 dark:hover:border-amber-900 transition-all group flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${t.type==="machine"?"bg-amber-100 text-amber-600":"bg-blue-100 text-blue-600"}`,children:t.type==="machine"?e.jsx(M,{size:24}):e.jsx(w,{size:24})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:t.name}),e.jsx("div",{className:"text-xs text-slate-400 font-mono mt-0.5",children:t.nextMaintenance})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(o,{variant:r?"danger":t.health<60?"warning":"success",size:"sm",children:r?"已逾期":"即将来临"}),e.jsxs("div",{className:"text-[9px] font-black text-slate-400 uppercase mt-2",children:["健康度 ",Math.round(t.health),"%"]})]})]},t.id)})})]},s))})]}),e.jsxs("div",{className:"p-10 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50 flex justify-between items-center text-[11px] text-slate-400 font-bold uppercase tracking-widest",children:[e.jsxs("div",{children:["当前系统共有 ",Me.length," 台注册资产"]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"})," 运行良好"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full"})," 建议维保"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})," 紧急维护"]})]})]})]})})]})]})]})};export{Bs as default};
