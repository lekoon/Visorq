import{u as F,a as T,r as o,j as e,F as b,U as z,M as C,i as S,X as M}from"./index-B83_YXak.js";import{P as f}from"./plus-C9a8qCvh.js";import{P as D}from"./pen-BcIEAH6T.js";const O=()=>{const{projectTemplates:c,addTemplate:m,updateTemplate:j,deleteTemplate:g,factorDefinitions:x}=F(),{t}=T(),[N,i]=o.useState(!1),[r,u]=o.useState(null),[l,n]=o.useState({name:"",description:"",defaultFactors:{},defaultResources:[]}),v=()=>{const s={};return x.forEach(a=>s[a.id]=5),s},d=s=>{s?(u(s.id),n(s)):(u(null),n({name:"",description:"",defaultFactors:v(),defaultResources:[]})),i(!0)},y=s=>{s.preventDefault(),r?j(r,l):m({...l,id:Math.random().toString(36).substr(2,9)}),i(!1)},w=s=>{m({...s,id:Math.random().toString(36).substr(2,9),name:`${s.name} (Copy)`})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:t("templates.title")}),e.jsx("p",{className:"text-slate-500 mt-1",children:t("templates.subtitle")})]}),e.jsxs("button",{onClick:()=>d(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl flex items-center gap-2 transition-colors shadow-lg shadow-blue-600/20",children:[e.jsx(f,{size:20}),t("templates.createTemplate")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.map(s=>{var a;return e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx(b,{className:"text-blue-600",size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900",children:s.name}),e.jsx("p",{className:"text-xs text-slate-500",children:t("templates.template")})]})]})}),e.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-xs text-slate-500",children:[e.jsxs("span",{children:[Object.keys(s.defaultFactors).length," ",t("templates.factors")]}),e.jsx("span",{children:"â€¢"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{size:14}),((a=s.defaultResources)==null?void 0:a.length)||0," ",t("templates.resources")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>d(s),className:"flex-1 py-2 px-3 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg transition-colors flex items-center justify-center gap-1",children:[e.jsx(D,{size:14}),t("common.edit")]}),e.jsx("button",{onClick:()=>w(s),className:"py-2 px-3 text-sm font-medium text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:t("templates.duplicate"),children:e.jsx(C,{size:14})}),e.jsx("button",{onClick:()=>{confirm(t("templates.confirmDelete"))&&g(s.id)},className:"py-2 px-3 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:t("common.delete"),children:e.jsx(S,{size:14})})]})]},s.id)}),c.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12 bg-slate-50 rounded-2xl border-2 border-dashed border-slate-200",children:[e.jsx(b,{className:"mx-auto text-slate-400 mb-4",size:48}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:t("templates.noTemplates")}),e.jsx("p",{className:"text-slate-500 mb-4",children:t("templates.createFirst")}),e.jsxs("button",{onClick:()=>d(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg inline-flex items-center gap-2",children:[e.jsx(f,{size:18}),t("templates.createTemplate")]})]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center sticky top-0 bg-white z-10",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:t(r?"templates.editTemplate":"templates.createTemplate")}),e.jsx("button",{onClick:()=>i(!1),className:"p-2 hover:bg-slate-100 rounded-full",children:e.jsx(M,{size:24})})]}),e.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("templates.templateName")}),e.jsx("input",{required:!0,type:"text",className:"w-full p-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",value:l.name,onChange:s=>n({...l,name:s.target.value}),placeholder:t("templates.namePlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("templates.description")}),e.jsx("textarea",{className:"w-full p-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,value:l.description,onChange:s=>n({...l,description:s.target.value}),placeholder:t("templates.descriptionPlaceholder")})]})]}),e.jsxs("div",{className:"border-t border-slate-100 pt-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:t("templates.defaultFactors")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(s=>{var a,p;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("label",{className:"font-medium text-slate-600",children:s.name}),e.jsx("span",{className:"font-bold text-blue-600",children:((a=l.defaultFactors)==null?void 0:a[s.id])||0})]}),e.jsx("input",{type:"range",min:"0",max:"10",step:"1",className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-600",value:((p=l.defaultFactors)==null?void 0:p[s.id])||0,onChange:k=>n(h=>({...h,defaultFactors:{...h.defaultFactors,[s.id]:parseInt(k.target.value)}}))})]},s.id)})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-6 py-3 rounded-xl text-slate-600 hover:bg-slate-100 font-medium transition-colors",children:t("common.cancel")}),e.jsx("button",{type:"submit",className:"px-6 py-3 rounded-xl bg-blue-600 text-white font-bold hover:bg-blue-700 shadow-lg shadow-blue-600/20 transition-colors",children:t("common.save")})]})]})]})})]})};export{O as default};
