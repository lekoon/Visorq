import{u as C,a as F,r as d,j as e,F as h,U as T,b0 as z,v as D,q as S}from"./index-BvQyAdiV.js";import{P as f}from"./plus-CjGNTfrT.js";import{P as I}from"./pen-IFSPnjG1.js";const E=()=>{const{projectTemplates:c,addTemplate:m,updateTemplate:g,deleteTemplate:j,factorDefinitions:u}=C(),{t}=F(),[v,r]=d.useState(!1),[o,x]=d.useState(null),[l,a]=d.useState({name:"",description:"",category:"web",department:"",defaultBudget:0,defaultDuration:12,defaultFactors:{},defaultResources:[]}),N=()=>{const s={};return u.forEach(n=>s[n.id]=5),s},i=s=>{s?(x(s.id),a(s)):(x(null),a({name:"",description:"",category:"web",department:"",defaultBudget:0,defaultDuration:12,defaultFactors:N(),defaultResources:[]})),r(!0)},y=s=>{s.preventDefault(),o?g(o,l):m({...l,id:Math.random().toString(36).substr(2,9)}),r(!1)},w=s=>{m({...s,id:Math.random().toString(36).substr(2,9),name:`${s.name} (Copy)`})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:t("templates.title")}),e.jsx("p",{className:"text-slate-500 mt-1",children:t("templates.subtitle")})]}),e.jsxs("button",{onClick:()=>i(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl flex items-center gap-2 transition-colors shadow-lg shadow-blue-600/20",children:[e.jsx(f,{size:20}),t("templates.createTemplate")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.map(s=>{var n;return e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx(h,{className:"text-blue-600",size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900",children:s.name}),e.jsx("p",{className:"text-xs text-slate-500",children:t("templates.template")})]})]})}),e.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-xs text-slate-500",children:[e.jsxs("span",{children:[Object.keys(s.defaultFactors).length," ",t("templates.factors")]}),e.jsx("span",{children:"•"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(T,{size:14}),((n=s.defaultResources)==null?void 0:n.length)||0," ",t("templates.resources")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>i(s),className:"flex-1 py-2 px-3 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg transition-colors flex items-center justify-center gap-1",children:[e.jsx(I,{size:14}),t("common.edit")]}),e.jsx("button",{onClick:()=>w(s),className:"py-2 px-3 text-sm font-medium text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:t("templates.duplicate"),children:e.jsx(z,{size:14})}),e.jsx("button",{onClick:()=>{confirm(t("templates.confirmDelete"))&&j(s.id)},className:"py-2 px-3 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:t("common.delete"),children:e.jsx(D,{size:14})})]})]},s.id)}),c.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12 bg-slate-50 rounded-2xl border-2 border-dashed border-slate-200",children:[e.jsx(h,{className:"mx-auto text-slate-400 mb-4",size:48}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:t("templates.noTemplates")}),e.jsx("p",{className:"text-slate-500 mb-4",children:t("templates.createFirst")}),e.jsxs("button",{onClick:()=>i(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg inline-flex items-center gap-2",children:[e.jsx(f,{size:18}),t("templates.createTemplate")]})]})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center sticky top-0 bg-white z-10",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:t(o?"templates.editTemplate":"templates.createTemplate")}),e.jsx("button",{onClick:()=>r(!1),className:"p-2 hover:bg-slate-100 rounded-full",children:e.jsx(S,{size:24})})]}),e.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("templates.templateName")}),e.jsx("input",{required:!0,type:"text",className:"w-full p-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",value:l.name,onChange:s=>a({...l,name:s.target.value}),placeholder:t("templates.namePlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("templates.description")}),e.jsx("textarea",{className:"w-full p-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,value:l.description,onChange:s=>a({...l,description:s.target.value}),placeholder:t("templates.descriptionPlaceholder")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("templates.category")}),e.jsxs("select",{className:"w-full p-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",value:l.category,onChange:s=>a({...l,category:s.target.value}),children:[e.jsx("option",{value:"web",children:"Web 应用"}),e.jsx("option",{value:"mobile",children:"移动应用"}),e.jsx("option",{value:"data",children:"数据分析"}),e.jsx("option",{value:"infrastructure",children:"基础设施"}),e.jsx("option",{value:"custom",children:"自定义"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("templates.department")}),e.jsx("input",{type:"text",className:"w-full p-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",value:l.department,onChange:s=>a({...l,department:s.target.value}),placeholder:"输入负责部门"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[t("templates.budget")," (¥)"]}),e.jsx("input",{type:"number",className:"w-full p-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",value:l.defaultBudget,onChange:s=>a({...l,defaultBudget:parseInt(s.target.value)})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[t("templates.duration")," (",t("common.months"),")"]}),e.jsx("input",{type:"number",className:"w-full p-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",value:l.defaultDuration,onChange:s=>a({...l,defaultDuration:parseInt(s.target.value)})})]})]}),e.jsxs("div",{className:"border-t border-slate-100 pt-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:t("templates.defaultFactors")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(s=>{var n,p;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("label",{className:"font-medium text-slate-600",children:s.name}),e.jsx("span",{className:"font-bold text-blue-600",children:((n=l.defaultFactors)==null?void 0:n[s.id])||0})]}),e.jsx("input",{type:"range",min:"0",max:"10",step:"1",className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-600",value:((p=l.defaultFactors)==null?void 0:p[s.id])||0,onChange:k=>a(b=>({...b,defaultFactors:{...b.defaultFactors,[s.id]:parseInt(k.target.value)}}))})]},s.id)})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-6 py-3 rounded-xl text-slate-600 hover:bg-slate-100 font-medium transition-colors",children:t("common.cancel")}),e.jsx("button",{type:"submit",className:"px-6 py-3 rounded-xl bg-blue-600 text-white font-bold hover:bg-blue-700 shadow-lg shadow-blue-600/20 transition-colors",children:t("common.save")})]})]})]})})]})};export{E as default};
