import{e as le,d as oe,r as y,R as A,E as ye,j as e,C as Ne,b as ee,T as V,I as we,N as q,A as ce,c as J,p as te,O as Ae,f as se,z as Se,v as ze,w as Pe}from"./index-XLZZaUMN.js";import{T as Oe}from"./trending-down-akJ_oHS0.js";import{S as ae,n as Te,f as Q,b as _,o as Ee,A as ke,c as L,d as Ce,q as de,E as $e,g as W,r as De,i as _e,s as Ie,h as k,e as Re,u as Fe,G as Me,a as me,t as ie,j as Ke,X as xe,Y as ue,m as Be,R as Le,C as Ue,T as We}from"./generateCategoricalChart-DzhHydE2.js";import{C as Ze}from"./chevron-down-BbjZTL1T.js";import{C as Ge}from"./chevron-right-DAO4qLk6.js";import{C as he}from"./clock-DWWLUxPk.js";import{Z as U}from"./zap-B1ulQEXj.js";import{L as pe}from"./lightbulb-D1Eyian5.js";import{C as Ve}from"./chart-no-axes-column-DQqQSeJT.js";import{D as qe}from"./download-nj5IrGRC.js";import{T as Qe}from"./target-BPhAXfIX.js";import{A as Xe}from"./activity-1YiNbKjz.js";import{F as Je}from"./filter-BMLcXrtA.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=le("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=le("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);function He(t){return s=>{const i=Math.trunc,a=i(s);return a===0?0:a}}function et(t,s,i){const a=oe(t,s)/7;return He()(a)}function C(t){"@babel/helpers - typeof";return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},C(t)}function tt(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function st(t,s){for(var i=0;i<s.length;i++){var a=s[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,ge(a.key),a)}}function at(t,s,i){return s&&st(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function it(t,s,i){return s=Z(s),rt(t,fe()?Reflect.construct(s,i||[],Z(t).constructor):s.apply(t,i))}function rt(t,s){if(s&&(C(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nt(t)}function nt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fe=function(){return!!t})()}function Z(t){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Z(t)}function lt(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Y(t,s)}function Y(t,s){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,l){return a.__proto__=l,a},Y(t,s)}function be(t,s,i){return s=ge(s),s in t?Object.defineProperty(t,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[s]=i,t}function ge(t){var s=ot(t,"string");return C(s)=="symbol"?s:s+""}function ot(t,s){if(C(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var a=i.call(t,s);if(C(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var F=function(t){function s(){return tt(this,s),it(this,s,arguments)}return lt(s,t),at(s,[{key:"render",value:function(){return null}}])}(y.Component);be(F,"displayName","ZAxis");be(F,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var ct=["option","isActive"];function I(){return I=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},I.apply(this,arguments)}function dt(t,s){if(t==null)return{};var i=mt(t,s),a,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(l=0;l<o.length;l++)a=o[l],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}function mt(t,s){if(t==null)return{};var i={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;i[a]=t[a]}return i}function xt(t){var s=t.option,i=t.isActive,a=dt(t,ct);return typeof s=="string"?y.createElement(ae,I({option:y.createElement(Te,I({type:s},a)),isActive:i,shapeType:"symbols"},a)):y.createElement(ae,I({option:s,isActive:i,shapeType:"symbols"},a))}function $(t){"@babel/helpers - typeof";return $=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},$(t)}function R(){return R=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},R.apply(this,arguments)}function re(t,s){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),i.push.apply(i,a)}return i}function z(t){for(var s=1;s<arguments.length;s++){var i=arguments[s]!=null?arguments[s]:{};s%2?re(Object(i),!0).forEach(function(a){E(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):re(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function ut(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function ne(t,s){for(var i=0;i<s.length;i++){var a=s[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,ve(a.key),a)}}function ht(t,s,i){return s&&ne(t.prototype,s),i&&ne(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function pt(t,s,i){return s=G(s),ft(t,je()?Reflect.construct(s,i||[],G(t).constructor):s.apply(t,i))}function ft(t,s){if(s&&($(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bt(t)}function bt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function je(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(je=function(){return!!t})()}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},G(t)}function gt(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&H(t,s)}function H(t,s){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,l){return a.__proto__=l,a},H(t,s)}function E(t,s,i){return s=ve(s),s in t?Object.defineProperty(t,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[s]=i,t}function ve(t){var s=jt(t,"string");return $(s)=="symbol"?s:s+""}function jt(t,s){if($(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var a=i.call(t,s);if($(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var M=function(t){function s(){var i;ut(this,s);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return i=pt(this,s,[].concat(l)),E(i,"state",{isAnimationFinished:!1}),E(i,"handleAnimationEnd",function(){i.setState({isAnimationFinished:!0})}),E(i,"handleAnimationStart",function(){i.setState({isAnimationFinished:!1})}),E(i,"id",Fe("recharts-scatter-")),i}return gt(s,t),ht(s,[{key:"renderSymbolsStatically",value:function(a){var l=this,o=this.props,c=o.shape,n=o.activeShape,u=o.activeIndex,h=Q(this.props,!1);return a.map(function(r,m){var x=u===m,d=x?n:c,p=z(z({},h),r);return A.createElement(_,R({className:"recharts-scatter-symbol",key:"symbol-".concat(r==null?void 0:r.cx,"-").concat(r==null?void 0:r.cy,"-").concat(r==null?void 0:r.size,"-").concat(m)},Ee(l.props,r,m),{role:"img"}),A.createElement(xt,R({option:d,isActive:x,key:"symbol-".concat(m)},p)))})}},{key:"renderSymbolsWithAnimation",value:function(){var a=this,l=this.props,o=l.points,c=l.isAnimationActive,n=l.animationBegin,u=l.animationDuration,h=l.animationEasing,r=l.animationId,m=this.state.prevPoints;return A.createElement(ke,{begin:n,duration:u,isActive:c,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(r),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var d=x.t,p=o.map(function(b,j){var v=m&&m[j];if(v){var g=L(v.cx,b.cx),f=L(v.cy,b.cy),w=L(v.size,b.size);return z(z({},b),{},{cx:g(d),cy:f(d),size:w(d)})}var O=L(0,b.size);return z(z({},b),{},{size:O(d)})});return A.createElement(_,null,a.renderSymbolsStatically(p))})}},{key:"renderSymbols",value:function(){var a=this.props,l=a.points,o=a.isAnimationActive,c=this.state.prevPoints;return o&&l&&l.length&&(!c||!Ce(c,l))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(l)}},{key:"renderErrorBar",value:function(){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var l=this.props,o=l.points,c=l.xAxis,n=l.yAxis,u=l.children,h=de(u,$e);return h?h.map(function(r,m){var x=r.props,d=x.direction,p=x.dataKey;return A.cloneElement(r,{key:"".concat(d,"-").concat(p,"-").concat(o[m]),data:o,xAxis:c,yAxis:n,layout:d==="x"?"vertical":"horizontal",dataPointFormatter:function(j,v){return{x:j.cx,y:j.cy,value:d==="x"?+j.node.x:+j.node.y,errorVal:W(j,v)}}})}):null}},{key:"renderLine",value:function(){var a=this.props,l=a.points,o=a.line,c=a.lineType,n=a.lineJointType,u=Q(this.props,!1),h=Q(o,!1),r,m;if(c==="joint")r=l.map(function(f){return{x:f.cx,y:f.cy}});else if(c==="fitting"){var x=De(l),d=x.xmin,p=x.xmax,b=x.a,j=x.b,v=function(w){return b*w+j};r=[{x:d,y:v(d)},{x:p,y:v(p)}]}var g=z(z(z({},u),{},{fill:"none",stroke:u&&u.fill},h),{},{points:r});return A.isValidElement(o)?m=A.cloneElement(o,g):_e(o)?m=o(g):m=A.createElement(Ie,R({},g,{type:n})),A.createElement(_,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var a=this.props,l=a.hide,o=a.points,c=a.line,n=a.className,u=a.xAxis,h=a.yAxis,r=a.left,m=a.top,x=a.width,d=a.height,p=a.id,b=a.isAnimationActive;if(l||!o||!o.length)return null;var j=this.state.isAnimationFinished,v=ye("recharts-scatter",n),g=u&&u.allowDataOverflow,f=h&&h.allowDataOverflow,w=g||f,O=k(p)?this.id:p;return A.createElement(_,{className:v,clipPath:w?"url(#clipPath-".concat(O,")"):null},g||f?A.createElement("defs",null,A.createElement("clipPath",{id:"clipPath-".concat(O)},A.createElement("rect",{x:g?r:r-x/2,y:f?m:m-d/2,width:g?x:x*2,height:f?d:d*2}))):null,c&&this.renderLine(),this.renderErrorBar(),A.createElement(_,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!b||j)&&Re.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(a,l){return a.animationId!==l.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:l.curPoints}:a.points!==l.curPoints?{curPoints:a.points}:null}}])}(y.PureComponent);E(M,"displayName","Scatter");E(M,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Me.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});E(M,"getComposedData",function(t){var s=t.xAxis,i=t.yAxis,a=t.zAxis,l=t.item,o=t.displayedData,c=t.xAxisTicks,n=t.yAxisTicks,u=t.offset,h=l.props.tooltipType,r=de(l.props.children,me),m=k(s.dataKey)?l.props.dataKey:s.dataKey,x=k(i.dataKey)?l.props.dataKey:i.dataKey,d=a&&a.dataKey,p=a?a.range:F.defaultProps.range,b=p&&p[0],j=s.scale.bandwidth?s.scale.bandwidth():0,v=i.scale.bandwidth?i.scale.bandwidth():0,g=o.map(function(f,w){var O=W(f,m),D=W(f,x),T=!k(d)&&W(f,d)||"-",S=[{name:k(s.dataKey)?l.props.name:s.name||s.dataKey,unit:s.unit||"",value:O,payload:f,dataKey:m,type:h},{name:k(i.dataKey)?l.props.name:i.name||i.dataKey,unit:i.unit||"",value:D,payload:f,dataKey:x,type:h}];T!=="-"&&S.push({name:a.name||a.dataKey,unit:a.unit||"",value:T,payload:f,dataKey:d,type:h});var N=ie({axis:s,ticks:c,bandSize:j,entry:f,index:w,dataKey:m}),P=ie({axis:i,ticks:n,bandSize:v,entry:f,index:w,dataKey:x}),K=T!=="-"?a.scale(T):b,B=Math.sqrt(Math.max(K,0)/Math.PI);return z(z({},f),{},{cx:N,cy:P,x:N-B,y:P-B,xAxis:s,yAxis:i,zAxis:a,width:2*B,height:2*B,size:K,node:{x:O,y:D,z:T},tooltipPayload:S,tooltipPosition:{x:N,y:P},payload:f},r&&r[w]&&r[w].props)});return z({points:g},u)});var vt=Ke({chartName:"ScatterChart",GraphicalChild:M,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:xe},{axisType:"yAxis",AxisComp:ue},{axisType:"zAxis",AxisComp:F}],formatAxisMap:Be});const yt=({metrics:t,timeRange:s})=>{const i=y.useMemo(()=>t.map(c=>({name:c.projectName,throughput:c.throughput,leadTime:c.leadTime,granularity:c.granularity,utilization:c.resourceUtilization,size:Math.max(100,Math.min(1e3,c.projectSize/10)),status:c.status})),[t]),a=c=>c>95?"#EF4444":c>85?"#F59E0B":c>=70?"#10B981":c>=50?"#3B82F6":"#94A3B8",l=y.useMemo(()=>{if(t.length===0)return null;const c=t.reduce((x,d)=>x+d.throughput,0)/t.length,n=t.reduce((x,d)=>x+d.leadTime,0)/t.length,u=t.reduce((x,d)=>x+d.resourceUtilization,0)/t.length,h=t.filter(x=>x.status==="efficient").length,r=t.filter(x=>x.status==="critical").length,m=t.filter(x=>x.status==="warning").length;return{avgThroughput:c,avgLeadTime:n,avgUtilization:u,efficientCount:h,criticalCount:r,warningCount:m}},[t]),o=({active:c,payload:n})=>{if(c&&n&&n.length){const u=n[0].payload;return e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg border border-slate-200",children:[e.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:u.name}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx("span",{className:"text-slate-600",children:"吞吐量:"}),e.jsxs("span",{className:"font-medium",children:[u.throughput.toFixed(2)," 事务/周"]})]}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx("span",{className:"text-slate-600",children:"前置时间:"}),e.jsxs("span",{className:"font-medium",children:[u.leadTime.toFixed(0)," 天"]})]}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx("span",{className:"text-slate-600",children:"任务颗粒度:"}),e.jsxs("span",{className:"font-medium",children:[u.granularity.toFixed(0)," 人天"]})]}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx("span",{className:"text-slate-600",children:"资源利用率:"}),e.jsxs("span",{className:`font-medium ${u.utilization>90?"text-red-600":u.utilization>80?"text-orange-600":u.utilization>=70?"text-green-600":"text-blue-600"}`,children:[u.utilization.toFixed(1),"%"]})]})]})]})}return null};return l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Ne,{className:"text-green-600",size:20})}),e.jsx("span",{className:"text-sm font-medium text-slate-600",children:"高效项目"})]}),e.jsx("div",{className:"text-3xl font-bold text-slate-900",children:l.efficientCount}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"运行良好"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(ee,{className:"text-yellow-600",size:20})}),e.jsx("span",{className:"text-sm font-medium text-slate-600",children:"预警项目"})]}),e.jsx("div",{className:"text-3xl font-bold text-slate-900",children:l.warningCount}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"需要关注"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(Oe,{className:"text-red-600",size:20})}),e.jsx("span",{className:"text-sm font-medium text-slate-600",children:"临界项目"})]}),e.jsx("div",{className:"text-3xl font-bold text-slate-900",children:l.criticalCount}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"紧急处理"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl p-5 shadow-lg text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(V,{size:20})}),e.jsx("span",{className:"text-sm font-medium",children:"平均吞吐量"})]}),e.jsx("div",{className:"text-3xl font-bold",children:l.avgThroughput.toFixed(1)}),e.jsx("div",{className:"text-xs text-blue-100 mt-1",children:"事务/周"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"项目效率三维分析"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"气泡大小代表项目规模，颜色代表资源利用率"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-slate-600",children:"超负荷 (>95%)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),e.jsx("span",{className:"text-slate-600",children:"高负荷 (85-95%)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-slate-600",children:"合理 (70-85%)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-slate-600",children:"正常 (50-70%)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-400"}),e.jsx("span",{className:"text-slate-600",children:"低负荷 (<50%)"})]})]})]}),e.jsx("div",{className:"h-[500px]",children:e.jsx(Le,{width:"100%",height:"100%",children:e.jsxs(vt,{margin:{top:20,right:20,bottom:60,left:60},children:[e.jsx(Ue,{strokeDasharray:"3 3",stroke:"#E2E8F0"}),e.jsx(xe,{type:"number",dataKey:"throughput",name:"吞吐量",unit:" 事务/周",tick:{fill:"#64748B",fontSize:12},label:{value:"事务吞吐量 (事务/周)",position:"bottom",offset:40,style:{fill:"#475569",fontWeight:600}}}),e.jsx(ue,{type:"number",dataKey:"leadTime",name:"前置时间",unit:" 天",tick:{fill:"#64748B",fontSize:12},label:{value:"前置时间 (天, P85)",angle:-90,position:"left",offset:40,style:{fill:"#475569",fontWeight:600}}}),e.jsx(F,{type:"number",dataKey:"size",range:[100,1e3],name:"项目规模"}),e.jsx(We,{content:e.jsx(o,{}),cursor:{strokeDasharray:"3 3"}}),e.jsx(M,{name:"项目",data:i,fillOpacity:.7,children:i.map((c,n)=>e.jsx(me,{fill:a(c.utilization)},`cell-${n}`))}),e.jsx("line",{x1:"0",y1:l.avgLeadTime,x2:"100%",y2:l.avgLeadTime,stroke:"#94A3B8",strokeDasharray:"5 5",strokeWidth:1})]})})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx(ee,{size:18}),"解读指南"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"理想区域:"})," 高吞吐量 + 低前置时间 + 合理利用率 (70-85%)"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"优化目标:"})," 将项目从右上角(低效)移向左下角(高效)"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"红色警示:"})," 资源利用率超过95%，存在过载风险"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"气泡大小:"})," 越大表示项目规模越大，需要更多关注"]})]})]})]})]}):e.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-slate-200 text-center",children:e.jsx("p",{className:"text-slate-500",children:"暂无数据"})})},Nt=({projects:t,resourcePool:s,metrics:i})=>{const[a,l]=y.useState("all"),[o,c]=y.useState(null),n=y.useMemo(()=>{const r=new Set;return s.forEach(m=>{m.name.includes("开发")||m.name.includes("Dev")?r.add("人力资源"):m.name.includes("服务器")||m.name.includes("Server")?r.add("物料资源"):m.name.includes("测试")||m.name.includes("Test")?r.add("人力资源"):r.add("其他资源")}),Array.from(r)},[s]),u=y.useMemo(()=>t.filter(r=>r.status==="active").map(r=>{const m=i.find(p=>p.projectId===r.id),x=m?m.throughput:0,d={};return n.forEach(p=>{let b=0,j=0;(r.resourceRequirements||[]).forEach(v=>{const g=s.find(f=>f.id===v.resourceId);if(g){let f="其他资源";g.name.includes("开发")||g.name.includes("Dev")?f="人力资源":g.name.includes("服务器")||g.name.includes("Server")?f="物料资源":(g.name.includes("测试")||g.name.includes("Test"))&&(f="人力资源"),(f===p||p==="all")&&(b+=v.count,j+=g.totalQuantity)}}),d[p]={used:b,total:j,percentage:j>0?b/j*100:0}}),{id:r.id,name:r.name,efficiencyScore:x,resourceUtilization:d,metric:m}}).sort((r,m)=>r.efficiencyScore-m.efficiencyScore),[t,s,i,n]),h=(r,m)=>{let x="bg-slate-100",d="text-slate-600";r>90?(x="bg-red-100",d="text-red-700"):r>85?(x="bg-yellow-100",d="text-yellow-700"):r>=75&&(x="bg-green-100",d="text-green-700");const p=Math.min(10,Math.max(0,m)),b=p<2?"h-24":p<5?"h-20":"h-16";return{className:`${x} ${d} ${b} transition-all duration-300 hover:brightness-95 cursor-pointer relative group`,percentage:r}};return e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"资源-效率关联分析矩阵"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"交叉分析资源投入与产出效率，单元格越大代表效率越低"})]}),e.jsx("div",{className:"flex gap-2",children:n.map(r=>e.jsx("button",{onClick:()=>l(r===a?"all":r),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${a===r?"bg-blue-100 text-blue-700 border border-blue-200":"bg-slate-50 text-slate-600 border border-slate-200 hover:bg-slate-100"}`,children:r},r))})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200",children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider w-64",children:"项目名称 / 效率"}),n.filter(r=>a==="all"||a===r).map(r=>e.jsxs("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase tracking-wider",children:[r,"利用率"]},r)),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-slate-500 uppercase tracking-wider w-32",children:"关联影响"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200",children:u.map(r=>{var x,d;const m=o===r.id;return e.jsxs(A.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>c(m?null:r.id),className:"text-slate-400 hover:text-blue-600",children:m?e.jsx(Ze,{size:16}):e.jsx(Ge,{size:16})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:r.name}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${r.efficiencyScore<2?"bg-red-100 text-red-700":r.efficiencyScore<5?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:["效率: ",r.efficiencyScore.toFixed(1)]})})]})]})}),n.filter(p=>a==="all"||a===p).map(p=>{const b=r.resourceUtilization[p],j=h(b.percentage,r.efficiencyScore);return e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:`w-full h-full rounded-lg flex flex-col items-center justify-center ${j.className}`,children:[e.jsxs("span",{className:"text-lg font-bold",children:[b.percentage.toFixed(0),"%"]}),e.jsxs("span",{className:"text-xs opacity-75",children:[b.used,"/",b.total]}),e.jsxs("div",{className:"absolute opacity-0 group-hover:opacity-100 bottom-full mb-2 bg-slate-900 text-white text-xs p-2 rounded shadow-lg pointer-events-none z-10 w-48 text-center transition-opacity",children:[b.percentage>90?"⚠️ 资源严重过载，建议立即调整":b.percentage>85?"⚠️ 资源接近饱和":"✅ 资源分配在合理区间",e.jsx("div",{className:"border-t border-slate-700 mt-1 pt-1",children:"点击查看详细分配"})]})]})},p)}),e.jsxs("td",{className:"px-6 py-4 text-center",children:[r.metric&&r.metric.leadTime>45&&e.jsxs("div",{className:"flex flex-col items-center text-red-600",children:[e.jsx(Ye,{size:20}),e.jsx("span",{className:"text-xs font-medium mt-1",children:"延期风险高"})]}),r.metric&&r.metric.leadTime<=45&&e.jsxs("div",{className:"flex flex-col items-center text-green-600",children:[e.jsx("span",{className:"text-2xl",children:"-"}),e.jsx("span",{className:"text-xs font-medium",children:"影响可控"})]})]})]}),m&&e.jsx("tr",{className:"bg-slate-50",children:e.jsx("td",{colSpan:n.length+2,className:"px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[e.jsx(we,{size:16,className:"text-blue-500"}),"资源瓶颈分析"]}),e.jsxs("p",{className:"text-sm text-slate-600",children:["当前项目主要受限于 ",e.jsx("strong",{children:"人力资源"}),"，导致前置时间延长约 15%。 建议增加 2 名高级开发人员。"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("h4",{className:"font-bold text-slate-800 mb-3",children:"效率预测"}),e.jsxs("div",{className:"flex justify-between items-center text-sm mb-2",children:[e.jsx("span",{className:"text-slate-600",children:"当前前置时间:"}),e.jsxs("span",{className:"font-medium",children:[(x=r.metric)==null?void 0:x.leadTime.toFixed(0)," 天"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"优化后预计:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[(((d=r.metric)==null?void 0:d.leadTime)||0)*.85," 天 (-15%)"]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("h4",{className:"font-bold text-slate-800 mb-3",children:"关联项目影响"}),e.jsxs("p",{className:"text-sm text-slate-600",children:["资源调整可能影响 ",e.jsx("strong",{children:"Project Alpha"})," 的进度。"]})]})]})})})]},r.id)})})]})}),e.jsxs("div",{className:"bg-slate-50 p-4 border-t border-slate-200 flex justify-center gap-8 text-xs text-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-100 border border-green-200 rounded"}),e.jsx("span",{children:"合理 (75%-85%)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-100 border border-yellow-200 rounded"}),e.jsx("span",{children:"饱和 (85%-90%)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-100 border border-red-200 rounded"}),e.jsx("span",{children:"过高 (>90%)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-4 border border-slate-300 border-dashed rounded"}),e.jsx("span",{children:"高度越大 = 效率越低"})]})]})]})},wt=({metrics:t,resourcePool:s})=>{const i=y.useMemo(()=>{const o=[];return t.forEach(n=>{n.resourceUtilization>90?o.push({id:`res-${n.projectId}`,type:"resource",level:"critical",title:`资源严重过载: ${n.projectName}`,message:`当前资源利用率 ${n.resourceUtilization.toFixed(1)}%，已超过红色警戒线 (90%)`,impact:`预计导致项目前置时间延长 ${(n.leadTime*.2).toFixed(1)} 天`,suggestion:"建议立即增加资源或暂停非关键任务",timestamp:new Date().toISOString()}):n.resourceUtilization>85&&o.push({id:`res-${n.projectId}`,type:"resource",level:"warning",title:`资源高负荷: ${n.projectName}`,message:`当前资源利用率 ${n.resourceUtilization.toFixed(1)}%，接近饱和状态`,impact:"可能导致交付延迟风险增加",suggestion:"建议密切监控，准备备用资源",timestamp:new Date().toISOString()})}),t.forEach(n=>{n.leadTime>60&&o.push({id:`eff-${n.projectId}`,type:"efficiency",level:"critical",title:`交付周期异常: ${n.projectName}`,message:`当前前置时间 ${n.leadTime.toFixed(0)} 天，远超平均水平`,impact:"严重影响整体交付吞吐量",suggestion:"建议进行流程诊断，消除阻塞环节",timestamp:new Date().toISOString()})}),s.filter(n=>(n.name.includes("Server")||n.name.includes("License"))&&n.totalQuantity<2).forEach(n=>{o.push({id:`stock-${n.id}`,type:"stock",level:"warning",title:`关键资源库存不足: ${n.name}`,message:`剩余可用数量仅为 ${n.totalQuantity}`,impact:"可能导致新项目无法启动",suggestion:"建议立即采购或释放闲置资源",timestamp:new Date().toISOString()})}),o.sort((n,u)=>n.level==="critical"?-1:1)},[t,s]),a=o=>{switch(o){case"critical":return"bg-red-50 border-red-200 text-red-900";case"warning":return"bg-orange-50 border-orange-200 text-orange-900";default:return"bg-blue-50 border-blue-200 text-blue-900"}},l=(o,c)=>{const n=c==="critical"?"text-red-600":"text-orange-600";switch(o){case"resource":return e.jsx(X,{className:n,size:24});case"efficiency":return e.jsx(he,{className:n,size:24});case"stock":return e.jsx(J,{className:n,size:24});default:return e.jsx(q,{className:n,size:24})}};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"text-slate-900"}),i.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"})]}),"实时监控预警"]}),e.jsxs("span",{className:"text-sm text-slate-500",children:["共发现 ",i.length," 个异常项"]})]}),i.length===0?e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(X,{className:"text-green-600",size:32})}),e.jsx("h4",{className:"text-lg font-bold text-green-900",children:"系统运行正常"}),e.jsx("p",{className:"text-green-700 mt-2",children:"各项指标均在合理区间内，未发现异常。"})]}):e.jsx("div",{className:"space-y-4",children:i.map(o=>e.jsx("div",{className:`p-6 rounded-2xl border ${a(o.level)} shadow-sm transition-transform hover:scale-[1.01]`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-white/60 rounded-xl backdrop-blur-sm",children:l(o.type,o.level)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"font-bold text-lg",children:o.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${o.level==="critical"?"bg-red-200 text-red-800":"bg-orange-200 text-orange-800"}`,children:o.level==="critical"?"红色预警":"黄色预警"})]}),e.jsx("p",{className:"mt-2 font-medium opacity-90",children:o.message}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-bold uppercase opacity-60 mb-1",children:"效率影响"}),e.jsxs("div",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(V,{size:16}),o.impact]})]}),e.jsxs("div",{className:"bg-white/50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-bold uppercase opacity-60 mb-1",children:"建议行动"}),e.jsxs("div",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ce,{size:16}),o.suggestion]})]})]})]})]})},o.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"动态阈值监控"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-slate-600",children:"人力资源阈值"}),e.jsx("span",{className:"font-bold text-slate-900",children:"85% (动态调整中)"})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 w-[85%] relative",children:e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 bg-white"})})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"基于 DWAFE 模型自动计算"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-slate-600",children:"物料库存阈值"}),e.jsx("span",{className:"font-bold text-slate-900",children:"20% (固定)"})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-orange-500 w-[20%]"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-slate-600",children:"Bay间资源阈值"}),e.jsx("span",{className:"font-bold text-slate-900",children:"90% (动态调整中)"})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-500 w-[90%]"})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 text-white shadow-lg",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"紧急响应中心"}),e.jsx("p",{className:"text-slate-300 text-sm mb-6",children:"针对当前的红色预警，系统推荐以下一键处理方案："}),e.jsxs("button",{className:"w-full py-3 bg-red-600 hover:bg-red-700 rounded-xl font-bold transition-colors mb-3 flex items-center justify-center gap-2",children:[e.jsx(X,{size:18}),"启动资源应急预案"]}),e.jsxs("button",{className:"w-full py-3 bg-white/10 hover:bg-white/20 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:[e.jsx(q,{size:18}),"通知所有项目经理"]})]})]})]})},At=(t,s,i="month")=>t.filter(a=>a.status==="active"||a.status==="completed").map(a=>{var O,D,T;const l=a.startDate?te(a.startDate):new Date,o=a.endDate?te(a.endDate):new Date,c=Math.max(1,oe(o,l)),n=Math.max(1,et(o,l)),u=((O=a.tasks)==null?void 0:O.length)||0,h=((D=a.tasks)==null?void 0:D.filter(S=>S.progress===100).length)||0,r=n>0?h/n:0,m=((T=a.tasks)==null?void 0:T.reduce((S,N)=>S+N.progress,0))||0,x=u>0?m/u:0,d=x>0?c/(x/100):c,p=(a.resourceRequirements||[]).reduce((S,N)=>{let P=N.duration;return N.unit==="month"&&(P=N.duration*30),N.unit==="year"&&(P=N.duration*365),S+N.count*P},0),b=u>0?p/u:p,j=(a.resourceRequirements||[]).reduce((S,N)=>S+N.count,0),v=(a.resourceRequirements||[]).reduce((S,N)=>{const P=s.find(K=>K.id===N.resourceId);return S+((P==null?void 0:P.totalQuantity)||0)},0),g=v>0?j/v*100:0,f=p;let w="normal";return g>95||d>60?w="critical":g>85||d>45?w="warning":r>5&&g>=70&&g<=85&&(w="efficient"),{projectId:a.id,projectName:a.name,throughput:r,leadTime:d,granularity:b,resourceUtilization:g,projectSize:f,status:w,totalTasks:u,completedTasks:h,resourceCount:j,durationDays:c}}),St=(t,s)=>{const i=[],a=t.reduce((n,u)=>n+u.resourceUtilization,0)/t.length;a>90?i.push({type:"resource",title:"整体资源利用率过高",description:`当前平均资源利用率为 ${a.toFixed(1)}%，建议增加资源池容量或调整项目排期`,impact:"high",estimatedImprovement:"可提升交付效率 20-30%"}):a<60&&i.push({type:"resource",title:"资源利用率偏低",description:`当前平均资源利用率仅为 ${a.toFixed(1)}%，建议增加项目并行度或优化资源分配`,impact:"medium",estimatedImprovement:"可提升资源利用率 15-25%"});const l=t.filter(n=>n.throughput<2);l.length>t.length*.3&&i.push({type:"process",title:"多个项目吞吐量偏低",description:`${l.length} 个项目的吞吐量低于 2 事务/周，建议优化开发流程和任务分解`,impact:"high",estimatedImprovement:"可缩短交付周期 25-40%"});const o=t.filter(n=>n.leadTime>45);o.length>0&&i.push({type:"process",title:"部分项目前置时间过长",description:`${o.length} 个项目的前置时间超过 45 天，建议采用敏捷方法缩短反馈周期`,impact:"high",estimatedImprovement:"可缩短前置时间 30-50%"});const c=t.filter(n=>n.status==="critical");return c.length>0&&i.push({type:"priority",title:"关键项目需要优先处理",description:`${c.length} 个项目处于临界状态，建议调整优先级并分配更多资源`,impact:"high",estimatedImprovement:"可避免项目延期风险"}),i.sort((n,u)=>{const h={high:3,medium:2,low:1};return(h[u.impact]||0)-(h[n.impact]||0)})},zt=({projects:t,resourcePool:s,metrics:i})=>{const[a,l]=y.useState("suggestions"),[o,c]=y.useState(new Set),n=y.useMemo(()=>St(i),[i,s]),u=h=>{const r=new Set(o);r.has(h)?r.delete(h):r.add(h),c(r)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>l("suggestions"),className:`px-6 py-2 rounded-full font-medium transition-all ${a==="suggestions"?"bg-blue-600 text-white shadow-md":"bg-white text-slate-600 hover:bg-slate-50"}`,children:["优化建议 (",n.length,")"]}),e.jsx("button",{onClick:()=>l("simulation"),className:`px-6 py-2 rounded-full font-medium transition-all ${a==="simulation"?"bg-purple-600 text-white shadow-md":"bg-white text-slate-600 hover:bg-slate-50"}`,children:"方案模拟"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx(U,{size:16,className:"text-yellow-500"}),e.jsx("span",{children:"AI 算法已就绪 (Genetic Algorithm + PSO)"})]})]}),a==="suggestions"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[n.map((h,r)=>{const m=o.has(r);return e.jsx("div",{className:`bg-white rounded-2xl p-6 shadow-sm border transition-all ${m?"border-green-500 ring-1 ring-green-500 bg-green-50/30":"border-slate-200 hover:border-blue-300"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${h.type==="resource"?"bg-blue-100 text-blue-600":h.type==="process"?"bg-purple-100 text-purple-600":"bg-orange-100 text-orange-600"}`,children:h.type==="resource"?e.jsx(Ae,{size:24}):h.type==="process"?e.jsx(U,{size:24}):e.jsx(pe,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"text-lg font-bold text-slate-900",children:h.title}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${h.impact==="high"?"bg-red-100 text-red-700":h.impact==="medium"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:h.impact==="high"?"高影响力":h.impact==="medium"?"中等影响":"低影响"})]}),e.jsx("p",{className:"text-slate-600 mt-2",children:h.description}),e.jsx("div",{className:"mt-4 flex items-center gap-4 bg-slate-50 p-3 rounded-lg border border-slate-100",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-green-700",children:[e.jsx(V,{size:16}),"预期效果: ",h.estimatedImprovement]})}),e.jsxs("div",{className:"mt-4 flex gap-3",children:[e.jsxs("button",{onClick:()=>u(r),className:`px-4 py-2 rounded-lg text-sm font-bold transition-colors flex items-center gap-2 ${m?"bg-green-600 text-white hover:bg-green-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[m?e.jsx(se,{size:16}):e.jsx(U,{size:16}),m?"已采纳":"一键优化"]}),e.jsx("button",{className:"px-4 py-2 rounded-lg text-sm font-medium text-slate-600 hover:bg-slate-100 border border-slate-200",children:"查看详情"})]})]})]})},r)}),n.length===0&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border border-slate-200",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(se,{className:"text-green-600",size:32})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"暂无优化建议"}),e.jsx("p",{className:"text-slate-500 mt-2",children:"当前资源配置和项目效率处于最佳状态"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(Ve,{size:20,className:"text-blue-600"}),"优化效果预览"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-slate-600",children:"资源利用率"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-slate-400 line-through",children:"92%"}),e.jsx("span",{className:"font-bold text-green-600",children:"85%"})]})]}),e.jsxs("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden flex",children:[e.jsx("div",{className:"h-full bg-green-500 w-[85%]"}),e.jsx("div",{className:"h-full bg-red-300 w-[7%] opacity-50"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-slate-600",children:"平均前置时间"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-slate-400 line-through",children:"45天"}),e.jsx("span",{className:"font-bold text-green-600",children:"38天"})]})]}),e.jsxs("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden flex",children:[e.jsx("div",{className:"h-full bg-blue-500 w-[70%]"}),e.jsx("div",{className:"h-full bg-slate-300 w-[15%] opacity-50"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-slate-600",children:"吞吐量"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-slate-400 line-through",children:"2.5/周"}),e.jsx("span",{className:"font-bold text-green-600",children:"3.2/周"})]})]}),e.jsxs("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden flex",children:[e.jsx("div",{className:"h-full bg-purple-500 w-[60%]"}),e.jsx("div",{className:"h-full bg-purple-300 w-[20%] opacity-50 border-l border-white"})]})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-4",children:[e.jsx(ce,{size:16}),e.jsxs("span",{children:["已选择 ",o.size," 项优化建议"]})]}),e.jsx("button",{disabled:o.size===0,className:"w-full py-3 bg-slate-900 text-white rounded-xl font-bold hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"应用所有更改"})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-2xl p-6 border border-blue-100",children:[e.jsx("h4",{className:"font-bold text-blue-900 mb-2",children:"风险评估"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 w-1.5 h-1.5 bg-blue-500 rounded-full"}),"资源调配可能导致 Project X 短期效率波动"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 w-1.5 h-1.5 bg-blue-500 rounded-full"}),"需要额外 2 周的新成员培训时间"]})]})]})]})]}),a==="simulation"&&e.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center border border-slate-200",children:[e.jsx("div",{className:"w-24 h-24 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(U,{className:"text-purple-600",size:48})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"多目标优化模拟器"}),e.jsx("p",{className:"text-slate-600 max-w-lg mx-auto mb-8",children:"系统正在运行遗传算法(Genetic Algorithm)和粒子群算法(PSO)，为您寻找资源利用率与交付效率的最佳平衡点..."}),e.jsx("div",{className:"w-full max-w-md mx-auto h-2 bg-slate-100 rounded-full overflow-hidden mb-4",children:e.jsx("div",{className:"h-full bg-purple-600 w-2/3 animate-pulse"})}),e.jsx("p",{className:"text-sm text-slate-400",children:"计算进度: 67%"})]})]})},Pt=()=>{const t=Se(),s=ze(),[i,a]=y.useState("overview"),[l,o]=y.useState("month"),c=y.useMemo(()=>At(t,s,l),[t,s,l]),n=y.useMemo(()=>{const u=t.filter(d=>d.status==="active"),h=c.reduce((d,p)=>d+p.throughput,0),r=c.length>0?c.reduce((d,p)=>d+p.leadTime,0)/c.length:0,m=c.length>0?c.reduce((d,p)=>d+p.resourceUtilization,0)/c.length:0,x=c.filter(d=>d.resourceUtilization>90||d.leadTime>30).length;return{totalProjects:u.length,totalThroughput:h,avgLeadTime:r,avgUtilization:m,criticalProjects:x}},[t,c]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"资源交付效率看板"}),e.jsx("p",{className:"text-slate-600 mt-2",children:"实时监控项目交付效率与资源利用率，驱动数据决策优化"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:l,onChange:u=>o(u.target.value),className:"px-4 py-2 border border-slate-200 rounded-lg bg-white hover:border-blue-400 transition-colors",children:[e.jsx("option",{value:"week",children:"本周"}),e.jsx("option",{value:"month",children:"本月"}),e.jsx("option",{value:"quarter",children:"本季度"})]}),e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(qe,{size:18}),"导出报告"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(Qe,{size:24})}),e.jsx("span",{className:"text-xs font-medium bg-white/20 px-2 py-1 rounded-full",children:"活跃项目"})]}),e.jsx("div",{className:"text-4xl font-bold mb-1",children:n.totalProjects}),e.jsx("div",{className:"text-sm text-blue-100",children:"正在进行中"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(Xe,{size:24})}),e.jsx("span",{className:"text-xs font-medium bg-white/20 px-2 py-1 rounded-full",children:"吞吐量"})]}),e.jsx("div",{className:"text-4xl font-bold mb-1",children:n.totalThroughput.toFixed(1)}),e.jsx("div",{className:"text-sm text-green-100",children:"事务/周"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(he,{size:24})}),e.jsx("span",{className:"text-xs font-medium bg-white/20 px-2 py-1 rounded-full",children:"前置时间"})]}),e.jsx("div",{className:"text-4xl font-bold mb-1",children:n.avgLeadTime.toFixed(0)}),e.jsx("div",{className:"text-sm text-purple-100",children:"天 (P85)"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(V,{size:24})}),e.jsx("span",{className:"text-xs font-medium bg-white/20 px-2 py-1 rounded-full",children:"资源利用率"})]}),e.jsxs("div",{className:"text-4xl font-bold mb-1",children:[n.avgUtilization.toFixed(0),"%"]}),e.jsx("div",{className:"text-sm text-orange-100",children:"平均水平"})]}),e.jsxs("div",{className:`bg-gradient-to-br ${n.criticalProjects>0?"from-red-500 to-red-600":"from-slate-500 to-slate-600"} rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-shadow`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(J,{size:24})}),e.jsx("span",{className:"text-xs font-medium bg-white/20 px-2 py-1 rounded-full",children:"预警项目"})]}),e.jsx("div",{className:"text-4xl font-bold mb-1",children:n.criticalProjects}),e.jsx("div",{className:"text-sm text-red-100",children:"需要关注"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>a("overview"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition-all ${i==="overview"?"bg-blue-600 text-white shadow-md":"text-slate-600 hover:bg-slate-100"}`,children:[e.jsx(Pe,{className:"inline mr-2",size:18}),"全局效率视图"]}),e.jsxs("button",{onClick:()=>a("matrix"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition-all ${i==="matrix"?"bg-blue-600 text-white shadow-md":"text-slate-600 hover:bg-slate-100"}`,children:[e.jsx(Je,{className:"inline mr-2",size:18}),"关联分析矩阵"]}),e.jsxs("button",{onClick:()=>a("alerts"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition-all ${i==="alerts"?"bg-blue-600 text-white shadow-md":"text-slate-600 hover:bg-slate-100"}`,children:[e.jsx(J,{className:"inline mr-2",size:18}),"实时预警"]}),e.jsxs("button",{onClick:()=>a("optimization"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition-all ${i==="optimization"?"bg-blue-600 text-white shadow-md":"text-slate-600 hover:bg-slate-100"}`,children:[e.jsx(pe,{className:"inline mr-2",size:18}),"智能优化"]})]})}),e.jsxs("div",{className:"min-h-[600px]",children:[i==="overview"&&e.jsx(yt,{metrics:c,timeRange:l}),i==="matrix"&&e.jsx(Nt,{projects:t,resourcePool:s,metrics:c}),i==="alerts"&&e.jsx(wt,{metrics:c,resourcePool:s}),i==="optimization"&&e.jsx(zt,{projects:t,resourcePool:s,metrics:c})]})]})},Bt=()=>e.jsx("div",{className:"animate-in fade-in duration-500",children:e.jsx(Pt,{})});export{Bt as default};
